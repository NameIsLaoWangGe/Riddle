{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nexport default class UIMain_Person extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this._belongX = null;\r\n        this._belongChange = false;\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.selfScene = this.self.scene;\r\n        this.belongRoom = this.selfScene.getChildByName('Room2');\r\n        this.moveDirection = lwg.Enum.PersonDir.right;\r\n        this.self['UIMain_Person'] = this;\r\n        this.rig = this.self.getComponent(Laya.RigidBody);\r\n    }\r\n    changeRoom(roomName) {\r\n        this.self.visible = false;\r\n        this.belongRoom = this.selfScene.getChildByName(roomName);\r\n        this.self.visible = true;\r\n    }\r\n    onTriggerEnter(other, self) {\r\n        let otherOwner = other.owner;\r\n        let otherName = otherOwner.name;\r\n        if (other.label === 'wall') {\r\n            this.changeDirection();\r\n            console.log('与墙壁碰撞');\r\n        }\r\n        else if (otherName === lwg.Enum.AisleType.up || otherName === lwg.Enum.AisleType.down || otherName === lwg.Enum.AisleType.left || otherName === lwg.Enum.AisleType.right) {\r\n            let openSwitch = otherOwner['UIMain_Aisle'].openSwitch;\r\n            let connectRoom = otherOwner['UIMain_Aisle'].connectRoom;\r\n            if (openSwitch === false) {\r\n                this.changeDirection();\r\n            }\r\n            else {\r\n                let otherDir = otherName.substring(0, 1);\r\n                let selfDir = this.moveDirection.substring(0, 1);\r\n                if (otherDir === selfDir) {\r\n                    console.log('方向相同');\r\n                    if (this.belongRoom !== connectRoom) {\r\n                        this.belongRoom = connectRoom;\r\n                        this._belongChange = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    changeDirection() {\r\n        if (this.moveDirection === lwg.Enum.PersonDir.left) {\r\n            this.moveDirection = lwg.Enum.PersonDir.right;\r\n        }\r\n        else {\r\n            this.moveDirection = lwg.Enum.PersonDir.left;\r\n        }\r\n    }\r\n    move() {\r\n        if (this.moveDirection === lwg.Enum.PersonDir.left) {\r\n            this.self.x -= 4;\r\n        }\r\n        else if (this.moveDirection === lwg.Enum.PersonDir.right) {\r\n            this.self.x += 4;\r\n        }\r\n        if (!this._belongX) {\r\n            if (this.belongRoom) {\r\n                this._belongX = this.belongRoom.x;\r\n            }\r\n        }\r\n        else {\r\n            if (this._belongChange) {\r\n                this._belongX = null;\r\n                this._belongChange = false;\r\n            }\r\n            else {\r\n                let x = this.belongRoom.x - this._belongX;\r\n                this.self.x = this.self.x + x;\r\n                this._belongX = this.belongRoom.x;\r\n            }\r\n        }\r\n        if (this.belongRoom) {\r\n            this.self.y = this.belongRoom.y + this.belongRoom.height / 2 - 50;\r\n        }\r\n    }\r\n    onUpdate() {\r\n        this.move();\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle/src/script/Lwg_Template/lwg.ts"
  ]
}
