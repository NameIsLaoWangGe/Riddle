{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport UIMain_Follow from \"./UIMain_Follow\";\r\nexport default class UIMain_Room extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.upAisle_01P = new Laya.Point();\r\n        this.upAisle_02P = new Laya.Point();\r\n        this.downAisle_01P = new Laya.Point();\r\n        this.downAisle_02P = new Laya.Point();\r\n        this.leftAisle_01P = new Laya.Point();\r\n        this.leftAisle_02P = new Laya.Point();\r\n        this.rightAisle_01P = new Laya.Point();\r\n        this.rightAisle_02P = new Laya.Point();\r\n        this.rightWallP = new Laya.Point();\r\n        this.leftWallP = new Laya.Point();\r\n        this.Floor_01P = new Laya.Point();\r\n        this.Floor_02P = new Laya.Point();\r\n        this.TargetP = new Laya.Point();\r\n        this.ladder_01P = new Laya.Point();\r\n        this.ladder_02P = new Laya.Point();\r\n        this.ladder_03P = new Laya.Point();\r\n        this.moveDog_01P = new Laya.Point();\r\n        this.moveDog_02P = new Laya.Point();\r\n        this.staticDog_01P = new Laya.Point();\r\n        this.staticDog_02P = new Laya.Point();\r\n        this._roomPickup = false;\r\n        this._roomMove = false;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['UIMain_Room'] = this;\r\n        this.rig = this.self.getComponent(Laya.RigidBody);\r\n        this.rig.setVelocity({ x: 0, y: 0 });\r\n        this.btnOnClick();\r\n        this.collisionNodeFollow();\r\n    }\r\n    collisionNodeFollow() {\r\n        for (let index = 0; index < this.self.numChildren; index++) {\r\n            const child = this.self.getChildAt(index);\r\n            let rig = child.getComponent(Laya.RigidBody);\r\n            if (rig) {\r\n                let followScript = child.getComponent(UIMain_Follow);\r\n                if (!followScript) {\r\n                    child.addComponent(UIMain_Follow);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    aisleInit() {\r\n        for (let index = 0; index < this.self.numChildren; index++) {\r\n            const child = this.self.getChildAt(index);\r\n            switch (child.name) {\r\n                case lwg.Enum.AisleType.up_01:\r\n                    this.upAisle_01 = child;\r\n                    this.upAisle_01P.x = child.x;\r\n                    this.upAisle_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.up_02:\r\n                    this.upAisle_02 = child;\r\n                    this.upAisle_02P.x = child.x;\r\n                    this.upAisle_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.down_01:\r\n                    this.downAisle_01 = child;\r\n                    this.downAisle_01P.x = child.x;\r\n                    this.downAisle_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.down_02:\r\n                    this.downAisle_02 = child;\r\n                    this.downAisle_02P.x = child.x;\r\n                    this.downAisle_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.left_01:\r\n                    this.leftAisle_01 = child;\r\n                    this.leftAisle_01P.x = child.x;\r\n                    this.leftAisle_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.left_02:\r\n                    this.leftAisle_02 = child;\r\n                    this.leftAisle_02P.x = child.x;\r\n                    this.leftAisle_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.right_01:\r\n                    this.rightAisle_01 = child;\r\n                    this.rightAisle_01P.x = child.x;\r\n                    this.rightAisle_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.AisleType.right_02:\r\n                    this.rightAisle_02 = child;\r\n                    this.rightAisle_02P.x = child.x;\r\n                    this.rightAisle_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.WallType.right:\r\n                    this.rightWall = child;\r\n                    this.rightWallP.x = child.x;\r\n                    this.rightWallP.y = child.y;\r\n                    break;\r\n                case lwg.Enum.WallType.left:\r\n                    this.leftWall = child;\r\n                    this.leftWallP.x = child.x;\r\n                    this.leftWallP.y = child.y;\r\n                    break;\r\n                case lwg.Enum.WallType.left:\r\n                    this.leftWall = child;\r\n                    this.leftWallP.x = child.x;\r\n                    this.leftWallP.y = child.y;\r\n                    break;\r\n                case lwg.Enum.FloorType.Floor_01 + '_' + this.self.name:\r\n                    this.Floor_01 = child;\r\n                    this.Floor_01P.x = child.x;\r\n                    this.Floor_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.FloorType.Floor_02 + '_' + this.self.name:\r\n                    this.Floor_02 = child;\r\n                    this.Floor_02P.x = child.x;\r\n                    this.Floor_02P.y = child.y;\r\n                    console.log(this.Floor_02P);\r\n                    break;\r\n                case lwg.Enum.OtherType.Target:\r\n                    this.Target = child;\r\n                    this.TargetP.x = child.x;\r\n                    this.TargetP.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.ladder_01:\r\n                    this.ladder_01 = child;\r\n                    this.ladder_01P.x = child.x;\r\n                    this.ladder_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.ladder_02:\r\n                    this.ladder_02 = child;\r\n                    this.ladder_02P.x = child.x;\r\n                    this.ladder_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.ladder_03:\r\n                    this.ladder_03 = child;\r\n                    this.ladder_03P.x = child.x;\r\n                    this.ladder_03P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.staticDog_01:\r\n                    this.staticDog_01 = child;\r\n                    this.staticDog_01P.x = child.x;\r\n                    this.staticDog_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.staticDog_02:\r\n                    this.staticDog_02 = child;\r\n                    this.staticDog_02P.x = child.x;\r\n                    this.staticDog_02P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.moveDog_01:\r\n                    this.moveDog_01 = child;\r\n                    this.moveDog_01P.x = child.x;\r\n                    this.moveDog_01P.y = child.y;\r\n                    break;\r\n                case lwg.Enum.OtherType.moveDog_02:\r\n                    this.moveDog_02 = child;\r\n                    this.moveDog_02P.x = child.x;\r\n                    this.moveDog_02P.y = child.y;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    physicalNodeFollow() {\r\n        if (this.upAisle_01) {\r\n            this.upAisle_01.x = this.upAisle_01P.x;\r\n            this.upAisle_01.y = this.upAisle_01P.y;\r\n        }\r\n        if (this.upAisle_02) {\r\n            this.upAisle_02.x = this.upAisle_02P.x;\r\n            this.upAisle_02.y = this.upAisle_02P.y;\r\n        }\r\n        if (this.downAisle_01) {\r\n            this.downAisle_01.x = this.downAisle_01P.x;\r\n            this.downAisle_01.y = this.downAisle_01P.y;\r\n        }\r\n        if (this.downAisle_02) {\r\n            this.downAisle_02.x = this.downAisle_02P.x;\r\n            this.downAisle_02.y = this.downAisle_02P.y;\r\n        }\r\n        if (this.leftAisle_01) {\r\n            this.leftAisle_01.x = this.leftAisle_01P.x;\r\n            this.leftAisle_01.y = this.leftAisle_01P.y;\r\n        }\r\n        if (this.leftAisle_02) {\r\n            this.leftAisle_02.x = this.leftAisle_02P.x;\r\n            this.leftAisle_02.y = this.leftAisle_02P.y;\r\n        }\r\n        if (this.rightAisle_01) {\r\n            this.rightAisle_01.x = this.rightAisle_01P.x;\r\n            this.rightAisle_01.y = this.rightAisle_01P.y;\r\n        }\r\n        if (this.rightAisle_02) {\r\n            this.rightAisle_02.x = this.rightAisle_02P.x;\r\n            this.rightAisle_02.y = this.rightAisle_02P.y;\r\n        }\r\n        if (this.leftWall) {\r\n            this.leftWall.x = this.leftWallP.x;\r\n            this.leftWall.y = this.leftWallP.y;\r\n        }\r\n        if (this.rightWall) {\r\n            this.rightWall.x = this.rightWallP.x;\r\n            this.rightWall.y = this.rightWallP.y;\r\n        }\r\n        if (this.Floor_01) {\r\n            this.Floor_01.x = this.Floor_01P.x;\r\n            this.Floor_01.y = this.Floor_01P.y;\r\n        }\r\n        if (this.Floor_02) {\r\n            this.Floor_02.x = this.Floor_02P.x;\r\n            this.Floor_02.y = this.Floor_02P.y;\r\n        }\r\n        if (this.Target) {\r\n            this.Target.x = this.TargetP.x;\r\n            this.Target.y = this.TargetP.y;\r\n        }\r\n        if (this.ladder_01) {\r\n            this.ladder_01.x = this.ladder_01P.x;\r\n            this.ladder_01.y = this.ladder_01P.y;\r\n        }\r\n        if (this.ladder_02) {\r\n            this.ladder_02.x = this.ladder_02P.x;\r\n            this.ladder_02.y = this.ladder_02P.y;\r\n        }\r\n        if (this.ladder_03) {\r\n            this.ladder_03.x = this.ladder_03P.x;\r\n            this.ladder_03.y = this.ladder_03P.y;\r\n        }\r\n        if (this.staticDog_01) {\r\n            this.staticDog_01.x = this.staticDog_01P.x;\r\n            this.staticDog_01.y = this.staticDog_01P.y;\r\n        }\r\n        if (this.staticDog_02) {\r\n            this.staticDog_02.x = this.staticDog_02P.x;\r\n            this.staticDog_02.y = this.staticDog_02P.y;\r\n        }\r\n        if (this.moveDog_01) {\r\n            this.moveDog_01.x = this.moveDog_01P.x;\r\n            this.moveDog_01.y = this.moveDog_01P.y;\r\n        }\r\n        if (this.moveDog_02) {\r\n            this.moveDog_02.x = this.moveDog_02P.x;\r\n            this.moveDog_02.y = this.moveDog_02P.y;\r\n        }\r\n    }\r\n    onTriggerEnter(other, self) {\r\n    }\r\n    onTriggerStay() {\r\n    }\r\n    btnOnClick() {\r\n        lwg.Click.on('noEffect', null, this.self, this, this.houseDwon, null, null, null);\r\n    }\r\n    houseDwon() {\r\n        this._roomX = this.self.x;\r\n        this._roomY = this.self.y;\r\n        this._roomMove = true;\r\n        lwg.Global._roomPickup = this.self;\r\n    }\r\n    onStageMouseDown(e) {\r\n        if (!this._stageX && !this._stageY) {\r\n            this._stageX = e.stageX;\r\n            this._stageY = e.stageY;\r\n        }\r\n    }\r\n    onStageMouseMove(e) {\r\n        if (this._roomMove) {\r\n            this.diffX = e.stageX - this._stageX;\r\n            this.diffY = e.stageY - this._stageY;\r\n            this.self.x = this._roomX + this.diffX;\r\n            this.self.y = this._roomY + this.diffY;\r\n        }\r\n    }\r\n    onStageMouseUp() {\r\n        lwg.Global._UIMain['UIMain'].currentRoom = null;\r\n        this._roomMove = false;\r\n        this._roomX = null;\r\n        this._roomY = null;\r\n        this._stageX = null;\r\n        this._stageY = null;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    onUpdate() {\r\n        this.self.rotation = 0;\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/Riddle/Riddle/src/script/Game/UIMain_Follow.ts"
  ]
}
