!function(){"use strict";var e;!function(e){let t,n,i,a,o,l,s,r,h,c;!function(t){function btnSetUp(){i._openScene("UISet",null,null,null)}function btnPauseUp(t){t.currentTarget.scale(1,1),e.Admin._openScene("UIPause",null,null,null)}function btnHintUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noHint)}function btnAgainUp(e){e.currentTarget.scale(1,1),i._refreshScene()}t._gameStart=!1,t._execution=100,t._CustomsNum=999,t._timeLineSwitch=!1,t._gameTimeLine=0,t._goldNum=0,t._voiceSwitch=!0,t._shakeSwitch=!0,t._allPifu=["01_xiaofu","02_konglong","03_xueren","04_qipao","05_qianxun","06_lvyifu","07_maozi","08_lufei","09_chaoren"],t.pingceV=!0,t._vibratingScreen=function(){},t._createLevel=function(n,i,a){let o;Laya.loader.load("prefab/LevelNode.json",Laya.Handler.create(this,function(l){let s=new Laya.Prefab;s.json=l,o=Laya.Pool.getItemByCreateFun("prefab",s.create,s),n.addChild(o),o.pos(i,a),o.zOrder=0,o.getChildByName("level").text="NO."+e.Global._gameLevel,t.LevelNode=o}))},t._createKeyNum=function(n,i,a){let o;Laya.loader.load("prefab/KeyNum.json",Laya.Handler.create(this,function(l){let s=new Laya.Prefab;s.json=l,o=Laya.Pool.getItemByCreateFun("prefab",s.create,s),n.addChild(o),o.pos(i,a),o.zOrder=0,o.getChildByName("Num").text=e.Global._execution+"/5",t.KeyNumNode=o}))},t._createBtnSet=function(e){let n;Laya.loader.load("prefab/BtnSet.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,n=Laya.Pool.getItemByCreateFun("prefab",a.create,a),e.addChild(n),n.pos(671,273),n.zOrder=0,s.on(l.ClickType.largen,null,n,null,null,null,btnSetUp,null),t.BtnSetNode=n}))},t.btnSetUp=btnSetUp,t._createGoldNum=function(e){let n;Laya.loader.load("prefab/GoldNum.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,(n=Laya.Pool.getItemByCreateFun("prefab",a.create,a)).getChildByName("Num").value=t._goldNum.toString(),e.addChild(n),n.pos(114,91),n.zOrder=0,t.GoldNumNode=n}))},t._createExecutionNum=function(e){let n;Laya.loader.load("prefab/ExecutionNum.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,n=Laya.Pool.getItemByCreateFun("prefab",a.create,a),e.addChild(n),n.getChildByName("Num").value=t._execution.toString(),n.pos(297,91),n.zOrder=0,t.ExecutionNumNode=n}))},t._createBtnPause=function(e){let n;Laya.loader.load("prefab/BtnPause.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,n=Laya.Pool.getItemByCreateFun("prefab",a.create,a),e.addChild(n),n.pos(645,137),n.zOrder=0,t.BtnPauseNode=n,s.on(l.ClickType.largen,null,n,null,null,null,btnPauseUp,null)}))},t.btnPauseUp=btnPauseUp,t._createBtnHint=function(e){let n;Laya.loader.load("prefab/BtnHint.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,n=Laya.Pool.getItemByCreateFun("prefab",a.create,a),e.addChild(n),n.pos(645,273),n.zOrder=0,t.BtnHintNode=n,s.on(l.ClickType.largen,null,n,null,null,null,btnHintUp,null)}))},t.btnHintUp=btnHintUp,t._createBtnAgain=function(e){let n;Laya.loader.load("prefab/BtnAgain.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,n=Laya.Pool.getItemByCreateFun("prefab",a.create,a),e.addChild(n),n.pos(645,404),n.zOrder=0,s.on(l.ClickType.largen,null,n,null,null,null,btnAgainUp,null),t.BtnAgainNode=n}))},t.btnAgainUp=btnAgainUp,t._createHint=function(e){let t;Laya.loader.load("prefab/HintPre.json",Laya.Handler.create(this,function(n){let i=new Laya.Prefab;i.json=n,t=Laya.Pool.getItemByCreateFun("prefab",i.create,i),Laya.stage.addChild(t),t.pos(Laya.stage.width/2,Laya.stage.height/2),t.getChildByName("dec").text=l.HintDec[e],r.HintAni_01(t,100,100,1e3,50,100,e=>{t.removeSelf()})}))},t._createGold=function(e,t,n,i){let a;Laya.loader.load("prefab/GolPre.json",Laya.Handler.create(this,function(e){let o=new Laya.Prefab;o.json=e,a=Laya.Pool.getItemByCreateFun("prefab",o.create,o),t.addChild(a),a.pos(n,i)}))}}(t=e.Global||(e.Global={})),function(t){let n;t.addData=function(){n={_gameLevel:e.Global._gameLevel,_goldNum:e.Global._goldNum,_buyNum:e.Global._buyNum,_currentPifu:e.Global._currentPifu,_havePifu:e.Global._havePifu,_watchAdsNum:e.Global._watchAdsNum,_gameOverAdvModel:e.Global._gameOverAdvModel};let t=JSON.stringify(n);Laya.LocalStorage.setItem("storageData",t)},t.clearData=function(){Laya.LocalStorage.clear()},t.getData=function(){let t=Laya.LocalStorage.getJSON("storageData");return t||(e.Global._gameLevel=1,e.Global._goldNum=0,e.Global._buyNum=1,e.Global._currentPifu=l.PifuAllName[0],e.Global._havePifu=["01_xiaofu"],e.Global._watchAdsNum=0,e.Global._gameOverAdvModel=1,e.Global._whetherAdv=!1,null)}}(n=e.LocalStorage||(e.LocalStorage={})),function(t){function _openScene(e,n,i,a){Laya.Scene.load("Scene/"+e+".json",Laya.Handler.create(this,function(n){n.width=Laya.stage.width,n.height=Laya.stage.height,Laya.stage.addChild(n);let o=n.getChildByName("background");o&&(o.width=Laya.stage.width,o.height=Laya.stage.height),console.log("打开"+e+"场景"),i&&i.close(),a&&a(),t._sceneControl[e]=n}))}t._sceneControl={},t._openScene=_openScene,t._openCustomsScene=function(){let t;e.Global._gameLevel<=9?t="UIMain_00"+e.Global._gameLevel:(9<e.Global._gameLevel||e.Global._gameLevel<=99)&&(t="UIMain_0"+e.Global._gameLevel),_openScene(t,0,null,null)},t._refreshScene=function(){let n;e.Global._gameLevel<=9?n="UIMain_00"+e.Global._gameLevel:(9<e.Global._gameLevel||e.Global._gameLevel<=99)&&(n="UIMain_0"+e.Global._gameLevel),t._sceneControl[n].close(),_openScene(n,0,null,null)},t._closeScene=function(e){let n;e<=9?n="UIMain_00"+e:(9<e||e<=99)&&(n="UIMain_0"+e),t._sceneControl[n].close()};t.Scene=class extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.lwgInit();let e=this.__proto__.constructor.name;this.self[e]=this,this.btnOnClick(),this.adaptive()}lwgInit(){console.log("父类的初始化！")}btnOnClick(){}adaptive(){}openAni(){}vanishAni(){}};t.Person=class extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.selfScene=this.self.scene,this.rig=this.self.getComponent(Laya.RigidBody);let e=this.__proto__.constructor.name;this.self[e]=this,this.lwgInit()}lwgInit(){console.log("父类的初始化！")}};t.Object=class extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.rig=this.self.getComponent(Laya.RigidBody),this.lwgInit()}lwgInit(){console.log("父类的初始化！")}}}(i=e.Admin||(e.Admin={})),function(t){let n;!function(e){e[e["Effects/cir_white.png"]=0]="Effects/cir_white.png",e[e["Effects/cir_black.png"]=1]="Effects/cir_black.png",e[e["Effects/cir_blue.png"]=2]="Effects/cir_blue.png",e[e["Effects/cir_bluish.png"]=3]="Effects/cir_bluish.png",e[e["Effects/cir_cyan.png"]=4]="Effects/cir_cyan.png",e[e["Effects/cir_grass.png"]=5]="Effects/cir_grass.png",e[e["Effects/cir_green.png"]=6]="Effects/cir_green.png",e[e["Effects/cir_orange.png"]=7]="Effects/cir_orange.png",e[e["Effects/cir_pink.png"]=8]="Effects/cir_pink.png",e[e["Effects/cir_purple.png"]=9]="Effects/cir_purple.png",e[e["Effects/cir_red.png"]=10]="Effects/cir_red.png",e[e["Effects/cir_yellow.png"]=11]="Effects/cir_yellow.png",e[e["Effects/star_black.png"]=12]="Effects/star_black.png",e[e["Effects/star_blue.png"]=13]="Effects/star_blue.png",e[e["Effects/star_bluish.png"]=14]="Effects/star_bluish.png",e[e["Effects/star_cyan.png"]=15]="Effects/star_cyan.png",e[e["Effects/star_grass.png"]=16]="Effects/star_grass.png",e[e["Effects/star_green.png"]=17]="Effects/star_green.png",e[e["Effects/star_orange.png"]=18]="Effects/star_orange.png",e[e["Effects/star_pink.png"]=19]="Effects/star_pink.png",e[e["Effects/star_purple.png"]=20]="Effects/star_purple.png",e[e["Effects/star_red.png"]=21]="Effects/star_red.png",e[e["Effects/star_white.png"]=22]="Effects/star_white.png",e[e["Effects/star_yellow.png"]=23]="Effects/star_yellow.png"}(n=t.SkinUrl||(t.SkinUrl={}));t.EffectsBase=class extends Laya.Script{onEnable(){this.self=this.owner,this.selfScene=this.self.scene;let e=this.__proto__.constructor.name;this.self[e]=this,this.self.pivotX=this.self.width/2,this.self.pivotY=this.self.height/2,this.timer=0,this.lwgInit(),this.initProperty(),this.propertyAssign()}lwgInit(){}initProperty(){}propertyAssign(){this.startAlpha&&(this.self.alpha=this.startAlpha),this.startScale&&this.self.scale(this.startScale,this.startScale),this.startRotat&&(this.self.rotation=this.startRotat)}commonSpeedXYByAngle(e,t){this.self.x+=c.speedXYByAngle(e,t+this.accelerated).x,this.self.y+=c.speedXYByAngle(e,t+this.accelerated).y}moveRules(){}onUpdate(){this.moveRules()}onDisable(){Laya.Pool.recover(this.self.name,this.self)}},t.createCommonExplosion=function(e,t,a,o){for(let l=0;l<t;l++){let t=Laya.Pool.getItemByClass("ele",Laya.Image);t.name="ele";let l=Math.floor(12*Math.random());t.alpha=1,t.skin=n[l],e.addChild(t),t.pos(a,o),t.getComponent(i)||t.addComponent(i)}};class i extends e.Effects.EffectsBase{initProperty(){this.startAngle=360*Math.random(),this.startSpeed=5*Math.random()+8,this.startScale=.4+.6*Math.random(),this.accelerated=.1,this.vanishTime=8+10*Math.random()}moveRules(){this.timer++,this.timer>=this.vanishTime/2&&(this.self.alpha-=.15),this.timer>=this.vanishTime?this.self.removeSelf():this.commonSpeedXYByAngle(this.startAngle,this.startSpeed+this.accelerated)}}t.commonExplosion=i}(a=e.Effects||(e.Effects={})),function(e){function createGongzhuTem(){e.gongzhuTem.on(Laya.Event.COMPLETE,this,null),e.gongzhuTem.on(Laya.Event.ERROR,this,onError),e.gongzhuTem.loadAni("SK/gongzhu.sk")}function createWangziTem(){e.wangziTem.on(Laya.Event.COMPLETE,this,null),e.wangziTem.on(Laya.Event.ERROR,this,onError),e.wangziTem.loadAni("SK/wangzi.sk")}function createGouTem(){e.gouTem.on(Laya.Event.COMPLETE,this,null),e.gouTem.on(Laya.Event.ERROR,this,onError),e.gouTem.loadAni("SK/gou.sk")}function createQingdi_01Tem(){e.qingdi_01Tem.on(Laya.Event.COMPLETE,this,null),e.qingdi_01Tem.on(Laya.Event.ERROR,this,onError),e.qingdi_01Tem.loadAni("SK/qingdi.sk")}function createQingdi_02Tem(){e.qingdi_02Tem.on(Laya.Event.COMPLETE,this,null),e.qingdi_02Tem.on(Laya.Event.ERROR,this,onError),e.qingdi_02Tem.loadAni("SK/qingdi1.sk")}function createHoumaTem(){e.houmaTem.on(Laya.Event.COMPLETE,this,null),e.houmaTem.on(Laya.Event.ERROR,this,onError),e.houmaTem.loadAni("SK/houma.sk")}function createHouziTem(){e.houziTem.on(Laya.Event.COMPLETE,this,null),e.houziTem.on(Laya.Event.ERROR,this,onError),e.houziTem.loadAni("SK/houzi.sk")}function createHouseTem(){e.houseTem.on(Laya.Event.COMPLETE,this,null),e.houseTem.on(Laya.Event.ERROR,this,onError),e.houseTem.loadAni("SK/house.sk")}function onError(){console.log("加载失败！")}e.gongzhuTem=new Laya.Templet,e.wangziTem=new Laya.Templet,e.gouTem=new Laya.Templet,e.qingdi_01Tem=new Laya.Templet,e.qingdi_02Tem=new Laya.Templet,e.houmaTem=new Laya.Templet,e.houziTem=new Laya.Templet,e.houseTem=new Laya.Templet,e.skLoding=function(){createGongzhuTem(),createWangziTem(),createGouTem(),createQingdi_01Tem(),createQingdi_02Tem(),createHoumaTem(),createHouziTem(),createHouseTem()},e.createGongzhuTem=createGongzhuTem,e.createWangziTem=createWangziTem,e.createGouTem=createGouTem,e.createQingdi_01Tem=createQingdi_01Tem,e.createQingdi_02Tem=createQingdi_02Tem,e.createHoumaTem=createHoumaTem,e.createHouziTem=createHouziTem,e.createHouseTem=createHouseTem,e.onError=onError}(o=e.Sk||(e.Sk={})),function(e){let t,n,i,a,o,l,s,r,h,c,u,g,m,f,d,p,y,_,b,L,k,S,w;!function(e){e[e["金币不够了！"]=0]="金币不够了！",e[e["没有可以卖的皮肤了！"]=1]="没有可以卖的皮肤了！",e[e["暂无广告!"]=2]="暂无广告!",e[e["暂无皮肤!"]=3]="暂无皮肤!",e[e["暂无分享!"]=4]="暂无分享!",e[e["暂无提示机会!"]=5]="暂无提示机会!"}(t=e.HintDec||(e.HintDec={})),function(e){e[e.noGold=0]="noGold",e[e.noGetPifu=1]="noGetPifu",e[e.noAdv=2]="noAdv",e[e.noPifu=3]="noPifu",e[e.noShare=4]="noShare",e[e.noHint=5]="noHint"}(n=e.HintType||(e.HintType={})),function(e){e[e["01_xiaofu"]=0]="01_xiaofu",e[e["02_konglong"]=1]="02_konglong",e[e["03_xueren"]=2]="03_xueren",e[e["04_qipao"]=3]="04_qipao",e[e["05_qianxun"]=4]="05_qianxun",e[e["06_lvyifu"]=5]="06_lvyifu",e[e["07_maozi"]=6]="07_maozi",e[e["08_lufei"]=7]="08_lufei",e[e["09_chaoren"]=8]="09_chaoren"}(i=e.PifuOrder||(e.PifuOrder={})),function(e){e.noEffect="noEffect",e.largen="largen",e.balloon="balloon",e.beetle="beetle"}(a=e.ClickType||(e.ClickType={})),function(e){e.btn="voice/btn.wav",e.bgm="voice/bgm.mp3"}(o=e.voiceUrl||(e.voiceUrl={})),function(e){e[e["01_xiaofu"]=0]="01_xiaofu",e[e["02_konglong"]=1]="02_konglong",e[e["03_xueren"]=2]="03_xueren",e[e["04_qipao"]=3]="04_qipao",e[e["05_qianxun"]=4]="05_qianxun",e[e["06_lvyifu"]=5]="06_lvyifu",e[e["07_maozi"]=6]="07_maozi",e[e["08_lufei"]=7]="08_lufei",e[e["09_chaoren"]=8]="09_chaoren"}(l=e.PifuAllName||(e.PifuAllName={})),function(e){e[e["同桌"]=0]="同桌",e[e["小恐龙"]=1]="小恐龙",e[e["雪人"]=2]="雪人",e[e["啾啾"]=3]="啾啾",e[e["小芊"]=4]="小芊",e[e["麦尔"]=5]="麦尔",e[e["棒球小子"]=6]="棒球小子",e[e["陆肥"]=7]="陆肥",e[e["英雄"]=8]="英雄"}(s=e.PifuAllName_Ch||(e.PifuAllName_Ch={})),function(e){e[e["pifu/pifu_01_xiaofu.png"]=0]="pifu/pifu_01_xiaofu.png",e[e["pifu/pifu_02_konglong.png"]=1]="pifu/pifu_02_konglong.png",e[e["pifu/pifu_03_xueren.png"]=2]="pifu/pifu_03_xueren.png",e[e["pifu/pifu_04_qipao.png"]=3]="pifu/pifu_04_qipao.png",e[e["pifu/pifu_05_qianxun.png"]=4]="pifu/pifu_05_qianxun.png",e[e["pifu/pifu_06_lvyifu.png"]=5]="pifu/pifu_06_lvyifu.png",e[e["pifu/pifu_07_maozi.png"]=6]="pifu/pifu_07_maozi.png",e[e["pifu/pifu_08_lufei.png"]=7]="pifu/pifu_08_lufei.png",e[e["pifu/pifu_09_chaoren.png"]=8]="pifu/pifu_09_chaoren.png"}(r=e.PifuSkin||(e.PifuSkin={})),function(e){e[e["pifu/pifu_01_xiaofu_h.png"]=0]="pifu/pifu_01_xiaofu_h.png",e[e["pifu/pifu_02_konglong_h.png"]=1]="pifu/pifu_02_konglong_h.png",e[e["pifu/pifu_03_xueren_h.png"]=2]="pifu/pifu_03_xueren_h.png",e[e["pifu/pifu_04_qipao_h.png"]=3]="pifu/pifu_04_qipao_h.png",e[e["pifu/pifu_05_qianxun_h.png"]=4]="pifu/pifu_05_qianxun_h.png",e[e["pifu/pifu_06_lvyifu_h.png"]=5]="pifu/pifu_06_lvyifu_h.png",e[e["pifu/pifu_07_maozi_h.png"]=6]="pifu/pifu_07_maozi_h.png",e[e["pifu/pifu_08_lufei_h.png"]=7]="pifu/pifu_08_lufei_h.png",e[e["pifu/pifu_09_chaoren_h.png"]=8]="pifu/pifu_09_chaoren_h.png"}(h=e.PifuSkin_No||(e.PifuSkin_No={})),function(e){e.topUp="topUp",e.move="move",e.continue="continue",e.gold="gold"}(c=e.TaskType||(e.TaskType={})),function(e){e.UILoding="UILoding",e.UIMain="UIMain",e.UIStart="UIStart",e.UITask="UITask",e.UIVictory="UIVictory",e.UIDefeated="UIDefeated"}(u=e.SceneName||(e.SceneName={})),function(e){e.up="up",e.down="down",e.left="left",e.right="right"}(g=e.PersonDir||(e.PersonDir={})),function(e){e.NoStart="NoStart",e.Play="Play",e.Pause="pause",e.Victory="victory",e.Defeated="defeated"}(m=e.GameState||(e.GameState={})),function(e){e.onFloor="onFloor",e.onLadder="onLadder",e.inAir="inAir"}(f=e.MoveState||(e.MoveState={})),function(e){e.stick="stick",e.kettle="kettle"}(d=e.BuffState||(e.BuffState={})),function(e){e.blue="blue",e.bluish="bluish",e.grass="grass",e.green="green",e.pink="pink",e.purple="purple",e.red="red",e.yellow="yellow",e.yellowish="yellowish"}(p=e.RoomColor||(e.RoomColor={})),function(e){e.blue="Room/room_blue.png",e.bluish="Room/room_bluish.png",e.grass="Room/room_grass.png",e.green="Room/room_green.png",e.pink="Room/room_pink.png",e.purple="Room/room_purple.png",e.red="Room/room_red.png",e.yellow="Room/room_yellow.png",e.yellowish="Room/room_yellowish.png"}(y=e.RoomSkin||(e.RoomSkin={})),function(e){e.blue="Room/room_blue_wall.png",e.bluish="Room/room_bluish_wall.png",e.grass="Room/room_grass_wall.png",e.green="Room/room_green_wall.png",e.pink="Room/room_pink_wall.png",e.purple="Room/room_purple_wall.png",e.red="Room/room_red_wall.png",e.yellow="Room/room_yellow_wall.png",e.yellowish="Room/room_yellowish_wall.png"}(_=e.WallSkin||(e.WallSkin={})),function(e){e.blue="Room/room_blue_color.png",e.bluish="Room/room_bluish_color.png",e.grass="Room/room_grass_color.png",e.green="Room/room_green_color.png",e.pink="Room/room_pink_color.png",e.purple="Room/room_purple_color.png",e.red="Room/room_red_color.png",e.yellow="Room/room_yellow_color.png",e.yellowish="Room/room_yellowish_color.png"}(b=e.AisleColorSkin||(e.AisleColorSkin={})),function(e){e.walk="walk",e.die="die",e.die_xianglian="die_xianglian",e.walk_gun="walk_gun",e.walk_shuihu="walk_shuihu",e.walk_xianglian="walk_xianglian",e.attack_gun="attack_gun",e.attack_shuihu="attack_shuihu",e.win="win",e.win_xianglian="win_xianglian"}(L=e.gongzhuAni||(e.gongzhuAni={})),function(e){e.standby="standby",e.walk="walk",e.die="die"}(k=e.dogAni||(e.dogAni={})),function(e){e.standby="standby",e.win="win"}(S=e.wangziAni||(e.wangziAni={})),function(e){e.box_01_open="box_01_open",e.box_02_open="box_02_open",e.box_01_static="box_01_static",e.box_02_static="box_02_static"}(w=e.houseAni||(e.houseAni={}))}(l=e.Enum||(e.Enum={})),function(e){e.on=function(t,n,i,a,o,s,r,h){let c;switch(e.audioUrl=n||l.voiceUrl.btn,t){case"noEffect":c=new u;break;case"largen":c=new g;break;case"balloon":c=new m;break;case"beetle":c=new f;break;default:c=new g}i.on(Laya.Event.MOUSE_DOWN,a,null===o?c.down:o),i.on(Laya.Event.MOUSE_MOVE,a,null===s?c.move:s),i.on(Laya.Event.MOUSE_UP,a,null===r?c.up:r),i.on(Laya.Event.MOUSE_OUT,a,null===h?c.out:h)},e.off=function(e,t,n,i,a,o,l){let s;switch(e){case"largen":s=new g;break;case"balloon":s=new m;break;case"beetle":s=new f}t.off(Laya.Event.MOUSE_DOWN,n,null===i?s.down:i),t.off(Laya.Event.MOUSE_MOVE,n,null===a?s.move:a),t.off(Laya.Event.MOUSE_UP,n,null===o?s.up:o),t.off(Laya.Event.MOUSE_OUT,n,null===l?s.out:l)}}(s=e.Click||(e.Click={}));class u{constructor(){}down(e){console.log("无点击效果的点击")}move(e){}up(e){}out(e){}}e.Btn_NoEffect=u;class g{constructor(){}down(t){t.currentTarget.scale(1.1,1.1),e.Global._voiceSwitch&&Laya.SoundManager.playSound(s.audioUrl,1,Laya.Handler.create(this,function(){}))}move(e){e.currentTarget.scale(1,1)}up(e){e.currentTarget.scale(1,1)}out(e){e.currentTarget.scale(1,1)}}e.Btn_LargenEffect=g;class m{constructor(){}down(e){e.currentTarget.scale(s.balloonScale+.06,s.balloonScale+.06),Laya.SoundManager.playSound(s.audioUrl,1,Laya.Handler.create(this,function(){}))}up(e){e.currentTarget.scale(s.balloonScale,s.balloonScale)}move(e){e.currentTarget.scale(s.balloonScale,s.balloonScale)}out(e){e.currentTarget.scale(s.balloonScale,s.balloonScale)}}e.Btn_Balloon=m;class f{constructor(){}down(e){e.currentTarget.scale(s.beetleScale+.06,s.beetleScale+.06),Laya.SoundManager.playSound(s.audioUrl,1,Laya.Handler.create(this,function(){}))}up(e){e.currentTarget.scale(s.beetleScale,s.beetleScale)}move(e){e.currentTarget.scale(s.beetleScale,s.beetleScale)}out(e){e.currentTarget.scale(s.beetleScale,s.beetleScale)}}e.Btn_Beetle=f,function(e){e.simple_Rotate=function(e,t,n,i,a){e.rotation=t,Laya.Tween.to(e,{rotation:n},i,null,Laya.Handler.create(this,function(){null!==a&&a()}),0)},e.upDown_Overturn=function(e,t,n){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},t,null,Laya.Handler.create(this,function(){null!==n&&n()}),0)}),0)}),0)}),0)},e.leftRight_Overturn=function(e,t,n){Laya.Tween.to(e,{scaleX:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:0},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1},t,null,Laya.Handler.create(this,function(){}),0),null!==n&&n()}),0)}),0)}),0)},e.leftRight_Shake=function(e,t,n,i,a){Laya.Tween.to(e,{x:e.x-t},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x+2*t},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x-t},n,null,Laya.Handler.create(this,function(){null!==a&&a()}))}))}),i)},e.upDwon_Shake=function(e,t,n,i){Laya.Tween.to(e,{y:e.y+n},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y-2*n},t,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y+n},t,null,Laya.Handler.create(this,function(){null!==i&&i()}))}))}))},e.fadeOut=function(e,t,n,i,a,o){e.alpha=t,Laya.Tween.to(e,{alpha:n},i,null,Laya.Handler.create(this,function(){null!==o&&o()}),a)},e.fadeOut_KickBack=function(e,t,n,i,a,o){e.alpha=t,Laya.Tween.to(e,{alpha:n},i,null,Laya.Handler.create(this,function(){null!==o&&o()}),a)},e.move_FadeOut=function(e,t,n,i,a,o,l,s){e.alpha=0,e.scale(0,0),e.x=t,e.y=n,Laya.Tween.to(e,{alpha:1,x:i,y:a},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.move_FadeOut_Scale=function(e,t,n,i,a,o,l,s){e.alpha=0,e.targetX=0,e.targetY=0,e.x=t,e.y=n,Laya.Tween.to(e,{alpha:1,x:i,y:a,scaleX:1,scaleY:1},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.drop_Simple=function(e,t,n,i,a,o){Laya.Tween.to(e,{y:t,rotation:n},i,Laya.Ease.expoIn,Laya.Handler.create(this,function(){null!==o&&o()}),a)},e.drop_KickBack=function(e,t,n,i,a,o,l,s){e.alpha=t,e.y=n,Laya.Tween.to(e,{alpha:1,y:i+a},o,Laya.Ease.expoIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:i-a/2},o/2,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:i},o/4,null,Laya.Handler.create(this,function(){null!==s&&s()}),0)}),0)}),l)},e.drop_Excursion=function(e,t,n,i,a,o,l){Laya.Tween.to(e,{x:e.x+n,y:e.y+1*t/6},a,Laya.Ease.expoIn,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:e.x+n+50,y:t,rotation:i},a,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),o)},e.goUp_Simple=function(e,t,n,i,a,o,l){e.y=t,e.rotation=n,Laya.Tween.to(e,{y:i,rotation:0},a,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==l&&l()}),o)},e.cardRotateX_TowFace=function(e,t,n,i,a,o){Laya.Tween.to(e,{scaleX:0},i,null,Laya.Handler.create(this,function(){if(t)for(let n=0;n<t.length;n++){let i=e.getChildByName(t[n]);null!==i&&(i.alpha=0)}null!==n&&n(),Laya.Tween.to(e,{scaleX:1},.9*i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:0},.8*i,null,Laya.Handler.create(this,function(){if(t)for(let n=0;n<t.length;n++){let i=e.getChildByName(t[n]);null!==i&&(i.alpha=1)}Laya.Tween.to(e,{scaleX:1},.7*i,null,Laya.Handler.create(this,function(){null!==o&&o()}),0)}),0)}),0)}),a)},e.cardRotateX_OneFace=function(e,t,n,i,a){Laya.Tween.to(e,{scaleX:0},n,null,Laya.Handler.create(this,function(){null!==t&&t(),Laya.Tween.to(e,{scaleX:1},n,null,Laya.Handler.create(this,function(){null!==a&&a()}),0)}),i)},e.cardRotateY_TowFace=function(e,t,n,i,a,o){Laya.Tween.to(e,{scaleY:0},i,null,Laya.Handler.create(this,function(){if(t)for(let n=0;n<t.length;n++){let i=e.getChildByName(t[n]);null!==i&&(i.alpha=0)}null!==n&&n(),Laya.Tween.to(e,{scaleY:1},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:0},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleY:1},1*i/2,null,Laya.Handler.create(this,function(){if(t)for(let n=0;n<t.length;n++){let i=e.getChildByName(t[n]);null!==i&&(i.alpha=1)}null!==o&&o()}),0)}),0)}),0)}),a)},e.cardRotateY_OneFace=function(e,t,n,i,a){Laya.Tween.to(e,{scaleY:0},n,null,Laya.Handler.create(this,function(){null!==t&&t(),Laya.Tween.to(e,{scaleY:1},n,null,Laya.Handler.create(this,function(){null!==a&&a()}),0)}),i)},e.move_changeRotate=function(e,t,n,i,a,o,l){let s=t*i+e.x*(1-i),r=n*i+e.y*(1-i);Laya.Tween.to(e,{x:s,y:r,rotation:45},o,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{x:t,y:n,rotation:0},o,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),0)},e.bombs_Appear=function(e,t,n,i,a,o,l,s,r,h){e.scale(0,0),e.alpha=t,Laya.Tween.to(e,{scaleX:i,scaleY:i,alpha:1,rotation:a},o,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:n,scaleY:n,rotation:0},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:n+.2*(i-n),scaleY:n+.2*(i-n),rotation:0},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:n,scaleY:n,rotation:0},l,null,Laya.Handler.create(this,function(){null!==h&&h()}),0)}),0)}),0)}),s)},e.bombs_Vanish=function(e,t,n,i,a,o,l){Laya.Tween.to(e,{scaleX:t,scaleY:t,alpha:n,rotation:i},a,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==l&&l()}),o)},e.swell_shrink=function(e,t,n,i,a,o){Laya.Tween.to(e,{scaleX:n,scaleY:n,alpha:1},i,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t,scaleY:t,rotation:0},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t+.5*(n-t),scaleY:t+.5*(n-t),rotation:0},.5*i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:t,scaleY:t,rotation:0},i,null,Laya.Handler.create(this,function(){null!==o&&o()}),0)}),0)}),0)}),a)},e.move_Simple=function(e,t,n,i,a,o,l,s){e.x=t,e.y=n,Laya.Tween.to(e,{x:i,y:a},o,null,Laya.Handler.create(this,function(){null!==s&&s()}),l)},e.move_Deform_X=function(e,t,n,i,a,o,l,s,r){e.alpha=0,e.x=t,e.rotation=n,Laya.Tween.to(e,{x:i,scaleX:1+a,scaleY:1+o,rotation:n/3,alpha:1},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1,scaleY:1,rotation:0},l,null,Laya.Handler.create(this,function(){null!==r&&r()}),0)}),s)},e.move_Deform_Y=function(e,t,n,i,a,o,l,s,r){e.alpha=0,t&&(e.y=t),e.rotation=n,Laya.Tween.to(e,{y:i,scaleX:1+a,scaleY:1+o,rotation:n/3,alpha:1},l,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{scaleX:1,scaleY:1,rotation:0},l,null,Laya.Handler.create(this,function(){null!==r&&r()}),0)}),s)},e.blink_FadeOut=function(e,t,n,i,a,o){e.alpha=t,Laya.Tween.to(e,{alpha:n},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{alpha:t},i,null,Laya.Handler.create(this,function(){null!==o&&o()}),0)}),a)},e.HintAni_01=function(e,t,n,i,a,o,l){e.alpha=0,Laya.Tween.to(e,{alpha:1,y:e.y-t},n,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{y:e.y-15},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{alpha:0,y:e.y+t+a},o,null,Laya.Handler.create(this,function(){null!==l&&l()}),0)}),0)}),0)},e.rotate_Magnify_KickBack=function(e,t,n,i,a,o,l,s){e.alpha=0,e.scaleX=0,e.scaleY=0,Laya.Tween.to(e,{alpha:1,rotation:360+t,scaleX:1+n,scaleY:1+n},i,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360-t/2,scaleX:1+n/2,scaleY:1+n/2},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360+t/3,scaleX:1+n/5,scaleY:1+n/5},a,null,Laya.Handler.create(this,function(){Laya.Tween.to(e,{rotation:360,scaleX:1,scaleY:1},a,null,Laya.Handler.create(this,function(){e.rotation=0,null!==s&&s()}),0)}),l)}),0)}),o)}}(r=e.Animation||(e.Animation={})),function(e){e.playSound=function(e,t){Laya.SoundManager.playSound(e,t,Laya.Handler.create(this,function(){}))},e.playMusic=function(e,t,n){Laya.SoundManager.playMusic(e,t,Laya.Handler.create(this,function(){}),n)},e.stopMusic=function(){Laya.SoundManager.stopMusic()}}(h=e.PalyAudio||(e.PalyAudio={})),function(e){function getDiffEle(e,t,n){let i=[],a=0;for(;a<e.length-n;a++)i.push(a);const o=Math.floor(Math.random()*i.length);if(-1===t.indexOf(e[o])){const t=e[o];return e[o]=e[i.length-1],t}return e.splice(o,1),getDiffEle(e,t,n)}e.drawPieMask=function(e,t,n){e.cacheAs="bitmap";let i=new Laya.Sprite;return i.blendMode="destination-out",e.addChild(i),i.graphics.drawPie(e.width/2,e.height/2,e.width/2+10,t,n,"#000000")},e.transitionScreenPointfor3D=function(e,t){let n=new Laya.Vector3;t.viewport.project(e,t.projectionViewMatrix,n);let i=new Laya.Vector2;return i.x=n.x,i.y=n.y,i},e.random=function(e,t){const n=(t=t||10)-e+1;return Math.floor(Math.random()*n+e)},e.getRandomArrayElements=function(e,t){for(var n,i,a=e.slice(0),o=e.length,l=o-t;o-- >l;)n=a[i=Math.floor((o+1)*Math.random())],a[i]=a[o],a[o]=n;return a.slice(l)},e.getArrayDifElements=function(e,t){const n=[];let i=0;for(;i<t;i++){const t=getDiffEle(e.slice(),n,i);n.push(t)}return n},e.getDiffEle=getDiffEle,e.roleDragCan=!1,e.copydata=function(e){const t={};return Object.getOwnPropertyNames(e).forEach(n=>{t[n]=e[n]}),t},e.fillArray=function(e,t){for(var n=[],i=0;i<t;i++)n.push(e);return n},e.speedByAngle=function(e,t){if(e%90==0||!e)return void console.error("计算的角度异常,需要查看：",e);let n={x:0,y:0};return n.y=t.y,n.x=n.y/Math.tan(e*Math.PI/180),n},e.speedXYByAngle=function(e,t){const n={x:0,y:0};return n.x=t*Math.cos(e*Math.PI/180),n.y=t*Math.sin(e*Math.PI/180),n},e.speedLabelByAngle=function(t,n,i){const a={x:0,y:0},o=t,l=n,s=i||1;if(o%90==0)0===o||360===o?a.x=Math.abs(l)*s:90===o?a.y=Math.abs(l)*s:180===o?a.x=-Math.abs(l)*s:a.y=-Math.abs(l)*s;else{const t=e.speedXYByAngle(o,l);a.x=t.x,a.y=t.y,a.y=o>0&&o<180?Math.abs(a.y)*s:-Math.abs(a.y)*s,a.x=o>90&&o<270?-Math.abs(a.x)*s:Math.abs(a.x)*s}return a},e.getRad=function(e){return e/180*Math.PI},e.getRoundPos=function(e,t,n){var i=n,a=(t=t,2*Math.PI/360*e);return{x:i.x+Math.sin(a)*t,y:i.y-Math.cos(a)*t}},e.converteNum=function(e){if("number"!=typeof e)return console.warn("要转化的数字并不为number"),e;let t;return t=e<1e3?""+e:e<1e6?(e/1e3).toFixed(1)+"k":e<1e9?(e/1e6).toFixed(1)+"m":""+e}}(c=e.Tools||(e.Tools={}))}(e||(e={}));class t extends e.Admin.Scene{constructor(){super()}lwgInit(){this.self=this.owner,this.BtnAgain=this.self.BtnAgain,this.BtnLast=this.self.BtnLast,this.BtnShare=this.self.BtnShare,this.BtnExAdv=this.self.BtnExAdv,this.LvNum=this.self.LvNum,this.LvNum.value=e.Global._gameLevel.toString()}btnOnClick(){e.Click.on("largen",null,this.BtnAgain,this,null,null,this.BtnAgainUp,null),e.Click.on("largen",null,this.BtnLast,this,null,null,this.BtnLastUp,null),e.Click.on("largen",null,this.BtnShare,this,null,null,this.BtnShareUp,null),e.Click.on("largen",null,this.BtnExAdv,this,null,null,this.BtnExAdvUp,null)}BtnAgainUp(t){t.currentTarget.scale(1,1),e.Admin._refreshScene()}BtnLastUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noAdv)}BtnShareUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noShare)}BtnExAdvUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noAdv)}onDisable(){}}class n extends e.Admin.Scene{constructor(){super()}lwgInit(){Laya.MouseManager.multiTouchEnabled=!1,this.BtnAgain=this.self.BtnAgain,this.Wangzi=this.self.Wangzi,this.KeyNum=this.self.KeyNum,this.Gongzhu=this.self.Gongzhu,e.Global._gameStart=!0,e.Global._execution--,e.Global._execution<=0&&(e.Global._execution=0),e.Global._createGoldNum(this.self),e.Global._createExecutionNum(this.self),e.Global._createBtnAgain(this.self),e.Global._createBtnPause(this.self),e.Global._createBtnHint(this.self)}BtnAgainUp(t){e.Admin._refreshScene()}onUpdate(){}onDisable(){}}class i extends e.Admin.Scene{constructor(){super(...arguments),this.mianSceneOk=!1,this.time=0}lwgInit(){this.Mask=this.self.Mask,e.Global._gameLevel=6,e.Global._voiceSwitch&&e.PalyAudio.playMusic(e.Enum.voiceUrl.bgm,0,1e3),e.Sk.skLoding()}adaptive(){}dataLoading(){Laya.loader.load("Data/levelsData.json",Laya.Handler.create(this,this.levelsOnLoaded),null,Laya.Loader.JSON)}levelsOnLoaded(){e.Global._levelsData=Laya.loader.getRes("Data/levelsData.json").RECORDS,Laya.MouseManager.multiTouchEnabled=!1,this.lodeMianScene3D()}lodeMianScene3D(){Laya.Scene3D.load("testScene/LayaScene_GameMain/Conventional/GameMain.ls",Laya.Handler.create(this,this.mianSceneComplete))}mianSceneComplete(t){Laya.stage.addChildAt(t,0),t.addComponent(n),this.Mask.x=0,e.Admin._openScene("UIStart",1,this.self,null),this.lodeUserInfo(),this.mianSceneOk=!0}lodeUserInfo(){e.Global._goldNum=0,e.Global._gameLevel=5,e.Global._currentPifu=e.Enum.PifuOrder[0]}onUpdate(){this.time++,60===this.time?(this.Mask.x=-72,e.Admin._openScene("UIStart",0,this.self,null)):this.time}onDisable(){}}class a extends e.Admin.Person{lwgInit(){}onDisable(){}}class o extends e.Admin.Object{constructor(){super(),this.openSwitch=!1,this.connectRoom=null}lwgInit(){this.interactionPicStyle("exit"),this.picColor()}picColor(){let t=this.self.parent.skin,n=this.self.getChildByName("wall"),i=this.self.getChildByName("color");switch(t){case e.Enum.RoomSkin.blue:n.skin=e.Enum.WallSkin.blue,i.skin=e.Enum.AisleColorSkin.blue;break;case e.Enum.RoomSkin.bluish:n.skin=e.Enum.WallSkin.bluish,i.skin=e.Enum.AisleColorSkin.bluish;break;case e.Enum.RoomSkin.grass:n.skin=e.Enum.WallSkin.grass,i.skin=e.Enum.AisleColorSkin.grass;break;case e.Enum.RoomSkin.green:n.skin=e.Enum.WallSkin.green,i.skin=e.Enum.AisleColorSkin.green;break;case e.Enum.RoomSkin.pink:n.skin=e.Enum.WallSkin.pink,i.skin=e.Enum.AisleColorSkin.pink;break;case e.Enum.RoomSkin.purple:n.skin=e.Enum.WallSkin.purple,i.skin=e.Enum.AisleColorSkin.purple;break;case e.Enum.RoomSkin.red:n.skin=e.Enum.WallSkin.red,i.skin=e.Enum.AisleColorSkin.red;break;case e.Enum.RoomSkin.yellow:n.skin=e.Enum.WallSkin.yellow,i.skin=e.Enum.AisleColorSkin.yellow;break;case e.Enum.RoomSkin.yellowish:n.skin=e.Enum.WallSkin.yellowish,i.skin=e.Enum.AisleColorSkin.yellowish}}onTriggerEnter(e,t){let n=e.owner.name,i=this.self.name;if("aisle"===e.label&&"aisle"===t.label);else if("interaction"===e.label&&"interaction"===t.label){let t=n.substring(0,1),a=i.substring(0,1);("l"===t&&"r"===a||"r"===t&&"l"===a||"u"===t&&"d"===a||"d"===t&&"u"===a)&&(this.connectRoom=e.owner.parent,this.oppositeAisle=e.owner,this.interactionPicStyle("enter"),this.roomAdsorption())}}interactionPicStyle(e){let t=this.self.getChildByName("interaction");"enter"===e?t.skin="Room/ui_interaction_02.png":"exit"===e&&(t.skin="Room/ui_interaction_01.png")}roomAdsorption(){let t=this.oppositeAisle.x+this.connectRoom.x-this.connectRoom.width/2,n=this.oppositeAisle.y+this.connectRoom.y-this.connectRoom.height/2,i=this.self.parent,a=t-(this.self.x+i.x-i.width/2),o=n-(this.self.y+i.y-i.height/2);if(i.UIMain_Room._roomMove||e.Global._roomPickup!==i||(i.x+=a,i.y+=o,i.UIMain_Room._roomMove=!1,e.Global._roomPickup=null,e.Effects.createCommonExplosion(Laya.stage,15,t,n)),Math.abs(a)>10||Math.abs(o)>10){this.openSwitch=!1,this.selfScene.UIMain.Wangzi.UIMain_Wangzi.gzConnect=!1}else this.openSwitch=!0,this.gzAndWzConnect()}styleChanges(){let e=this.self.getChildByName("interaction"),t=this.self.getChildByName("color"),n=this.self.getChildByName("wall");this.openSwitch?(e.alpha=0,t.alpha=0,n.alpha=1):(e.alpha=1,t.alpha=1,n.alpha=0)}gzAndWzConnect(){let e=this.selfScene.UIMain.Gongzhu,t=this.selfScene.UIMain.Wangzi,n=e.UIMain_Gongzhu.belongRoom,i=t.UIMain_Wangzi.belongRoom,a=this.self.parent;(n===a&&i===this.connectRoom||i===a&&n===this.connectRoom)&&(t.UIMain_Wangzi.gzConnect=!0)}onTriggerExit(e,t){let n=e.owner.name,i=this.self.name;if("aisle"===e.label&&"aisle"===t.label);else if("interaction"===e.label&&"interaction"===t.label){let e=n.substring(0,1),t=i.substring(0,1);("l"===e&&"r"===t||"r"===e&&"l"===t||"u"===e&&"d"===t||"d"===e&&"u"===t)&&(this.interactionPicStyle("exit"),this.openSwitch=!1,this.connectRoom=null,this.oppositeAisle=null,console.log("失去感应",e,t))}}onUpdate(){this.connectRoom&&this.oppositeAisle&&this.roomAdsorption(),this.styleChanges()}onDisable(){}}class l extends e.Admin.Person{constructor(){super(...arguments),this.necklace=!1,this.drumstick=!1,this.inAir=!1,this.targetP=new Laya.Point,this.attackSwitch=!1,this.speed=2.5,this._belongX=null,this._belongY=null,this._belongChange=!1}lwgInit(){this.notCommon(),this.createskeleton(),this.setBelongRoom(),this.directionJudge()}notCommon(){this.buffState=null}directionJudge(){let t=this.self.getChildByName("pic");-1===t.scaleX?this.moveDirection=e.Enum.PersonDir.left:1===t.scaleX&&(this.moveDirection=e.Enum.PersonDir.right)}createskeleton(){this.skeleton=e.Sk.gongzhuTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.pos(this.self.width/2,this.self.height-9),this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.gongzhuAni.walk,!0)}setBelongRoom(){for(let e=0;e<this.selfScene.numChildren;e++){const t=this.selfScene.getChildAt(e);if("Room"===t.name.substring(0,4)){let e=Math.abs(t.x-this.self.x),n=Math.abs(t.y-this.self.y);if(e<=t.width/2&&n<=t.height/2){this.belongRoom=t;break}}}}onTriggerEnter(t,n){if(e.Global._gameStart)switch(t.label){case"wall":this.wallAndPerson(t,n);break;case"floor":this.floorAndPerson(t,n);break;case"ladder":this.ladderAndPerson(t,n);break;case"aisle":this.aisleAndPerson(t,n);break;case"dog":this.dogAndPerson(t,n);break;case"wangzi":this.wangziAndPerson(t,n);break;case"stick":this.stickAndPerson(t,n);break;case"kettle":this.kettleAndPerson(t,n);break;case"bonfire":this.bonfireAndPerson(t,n);break;case"necklace":this.necklaceAndPerson(t,n);break;case"speed":this.speedAndPerson(t,n);break;case"banana":this.bananaAndPerson(t,n);break;case"drumstick":this.drumstickAndPerson(t,n);break;case"houma":this.houmaAndPerson(t,n)}}houmaAndPerson(t,n){console.log("houma");let i=t.owner;i.name;if(!this.drumstick){this.attackSwitch=!0,i.UIMain_Houma.attackSwitch=!0;let t=i.getChildByName("apple");t.visible=!0,Laya.timer.frameOnce(100,this,n=>{this.skeleton.play(e.Enum.gongzhuAni.die,!1),t.visible=!1,Laya.timer.frameOnce(100,this,t=>{e.Admin._openScene("UIDefeated",null,null,null)})})}}drumstickAndPerson(e,t){let n=e.owner;n.name;n.removeSelf(),this.drumstick=!0}bananaAndPerson(t,n){let i=t.owner;i.name;i.removeSelf(),e.Global._gameStart=!1,this.skeleton.play(e.Enum.gongzhuAni.die,!1),Laya.timer.frameOnce(100,this,t=>{e.Admin._openScene("UIDefeated",null,null,null)})}speedAndPerson(e,t){let n=e.owner;n.name;n.removeSelf(),this.speed=2*this.speed}necklaceAndPerson(t,n){let i=t.owner;i.name;this.necklace=!0,this.skeleton.play(e.Enum.gongzhuAni.walk_xianglian,!0),i.removeSelf()}bonfireAndPerson(t,n){let i=t.owner;i.name;this.buffState===e.Enum.BuffState.kettle?(this.skeleton.play(e.Enum.gongzhuAni.attack_shuihu,!1),this.attackSwitch=!0,Laya.timer.frameOnce(100,this,t=>{i.removeSelf(),this.attackSwitch=!1,this.skeleton.play(e.Enum.gongzhuAni.walk_shuihu,!0)}),this.skeleton.on(Laya.Event.LABEL,this,this.shuihuComplete,[i])):(e.Global._gameStart=!1,Laya.timer.frameOnce(100,this,t=>{e.Admin._openScene("UIDefeated",null,null,null)}))}shuihuComplete(){console.log("浇水完毕")}kettleAndPerson(t,n){let i=t.owner;i.name;this.buffState=e.Enum.BuffState.kettle,this.skeleton.play(e.Enum.gongzhuAni.walk_shuihu,!0),i.removeSelf()}stickAndPerson(t,n){let i=t.owner;this.skeleton.play(e.Enum.gongzhuAni.walk_gun,!0),this.buffState=e.Enum.BuffState.stick,i.removeSelf()}dogAndPerson(t,n){let i=t.owner,a=i.name;this.attackSwitch=!0,"m"===a.substring(0,1)&&(i.Dog.eatFood=!0),this.buffState===e.Enum.BuffState.stick?(this.skeleton.play(e.Enum.gongzhuAni.attack_gun,!1),this.skeleton.on(Laya.Event.LABEL,this,this.attackComplete,[i])):(e.Global._gameStart=!1,this.targetP.x=this.self.x,this.targetP.y=this.self.y,this.skeleton.play(e.Enum.gongzhuAni.die,!1),"s"===a.substring(0,1)?i.UIMain_Follow.skeleton.play(e.Enum.dogAni.walk,!0):"m"===a.substring(0,1)&&i.Dog.skeleton.play(e.Enum.dogAni.walk,!0),Laya.timer.frameOnce(100,this,t=>{e.Admin._openScene("UIDefeated",null,null,null)}))}attackComplete(t){let n=t.name;if("s"===n.substring(0,1)){t.UIMain_Follow.skeleton.play(e.Enum.dogAni.die,!1)}else"m"===n.substring(0,1)&&t.Dog.skeleton.play(e.Enum.dogAni.die);this.skeleton.play(e.Enum.gongzhuAni.walk_gun,!0),this.attackSwitch=!1,Laya.timer.frameOnce(30,this,e=>{t.removeSelf()})}wallAndPerson(t,n){this.moveDirection!==e.Enum.PersonDir.left&&this.moveDirection!==e.Enum.PersonDir.right||this.changeDirection()}wangziAndPerson(t,n){e.Global._gameStart=!1;let i=t.owner;i.name;this.targetP.x=this.self.x,this.targetP.y=this.self.y,i.UIMain_Wangzi.skeleton.play(e.Enum.wangziAni.win,!0),this.skeleton.play(e.Enum.gongzhuAni.win,!0),Laya.timer.frameOnce(60,this,t=>{e.Admin._openScene("UIVictory",null,null,null)})}floorAndPerson(t,n){let i=t.owner,a=i.name,o=a.substring(a.length-5,a.length);this.belongRoom.name===o&&(this.personState===e.Enum.MoveState.onLadder?this.moveDirection=this.beforeLadderDir:this.personState===e.Enum.MoveState.inAir&&(this.moveDirection=this.beforeInAirDir),this.personState=e.Enum.MoveState.onFloor,this.currentFloor=i)}ladderAndPerson(t,n){let i=t.owner,a=(i.name,i.name.length),o="up_Aisle_"+i.name.substring(a-2,a),l=this.belongRoom.getChildByName(o);l&&(l.UIMain_Aisle.openSwitch?(console.log(i.name+"连接梯子"),this.personState===e.Enum.MoveState.onFloor?(this.beforeLadderDir=this.moveDirection,this.moveDirection=e.Enum.PersonDir.up,this.personState=e.Enum.MoveState.onLadder,console.log("上梯子","上梯子前的方向是：",this.beforeLadderDir)):this.beforeInAirDir!==e.Enum.PersonDir.left&&this.beforeInAirDir!==e.Enum.PersonDir.right||(this.beforeLadderDir=this.beforeInAirDir,this.personState=e.Enum.MoveState.onLadder,this.moveDirection=e.Enum.PersonDir.down),this.currentLadder=i):console.log("通道未打开，不会上梯子！"))}aisleAndPerson(t,n){let i=t.owner,a=i.name,o=i.UIMain_Aisle.openSwitch,l=i.UIMain_Aisle.connectRoom,s=a.substring(0,1),r=this.moveDirection.substring(0,1);if("l"===s||"r"===s)if(!1===o){i===this.belongRoom.getChildByName(i.name)&&this.changeDirection()}else s===r&&this.belongRoom!==l&&(this.belongRoom=l,this._belongChange=!0,this.beforeInAirDir=this.moveDirection,this.personState=e.Enum.MoveState.inAir);else if("d"===s||"u"===s)if("d"===s)!1===o?console.log("啥也不做！"):"l"!==r&&"r"!==r||this.belongRoom!==l&&(this.belongRoom=l,this._belongChange=!0,this.beforeInAirDir=this.moveDirection,this.personState=e.Enum.MoveState.inAir,this.moveDirection=e.Enum.PersonDir.down,console.log("下通道连接，准备下去"+this.beforeInAirDir));else if("u"===s)if(!1===o){i===this.belongRoom.getChildByName(i.name)&&(console.log("上面不通换方向"+this.personState),this.changeDirection())}else s===r&&this.belongRoom!==l&&(this.belongRoom=l,this._belongChange=!0,this.beforeInAirDir=this.beforeLadderDir,this.personState=e.Enum.MoveState.inAir,console.log("向上交换房间"))}onTriggerExit(t,n){if(e.Global._gameStart)if("floor"===t.label){let n=t.owner.name.substring(t.owner.name.length-5,t.owner.name.length);this.belongRoom.name===n&&this.personState!==e.Enum.MoveState.onLadder&&(this.beforeInAirDir=this.moveDirection,this.personState=e.Enum.MoveState.inAir,this.moveDirection=e.Enum.PersonDir.down,console.log(t.owner.name+"退出"+this.personState))}else if("ladder"===t.label){let n=t.owner.name.substring(t.owner.name.length-5,t.owner.name.length);this.belongRoom.name===n&&this.personState===e.Enum.MoveState.onFloor&&(this.moveDirection=this.beforeFloorDir,console.log(t.owner.name+"退出"+this.personState))}}changeDirection(){this.moveDirection===e.Enum.PersonDir.left?this.moveDirection=e.Enum.PersonDir.right:this.moveDirection===e.Enum.PersonDir.right?this.moveDirection=e.Enum.PersonDir.left:this.moveDirection===e.Enum.PersonDir.up?this.moveDirection=e.Enum.PersonDir.down:this.moveDirection===e.Enum.PersonDir.down&&(this.moveDirection=e.Enum.PersonDir.up)}move(){this.attackSwitch?this.rig.setVelocity({x:0,y:0}):this.moveDirection===e.Enum.PersonDir.left?(this.rig.setVelocity({x:-this.speed,y:0}),this.skeleton.scaleX=-1):this.moveDirection===e.Enum.PersonDir.right?(this.rig.setVelocity({x:this.speed,y:0}),this.skeleton.scaleX=1):this.moveDirection===e.Enum.PersonDir.up?this.rig.setVelocity({x:0,y:-6}):this.moveDirection===e.Enum.PersonDir.down&&this.rig.setVelocity({x:0,y:6})}positionOffset(){if(this.belongRoom)switch(this.personState){case e.Enum.MoveState.onFloor:if(this.currentFloor){let e=this.currentFloor.y+this.belongRoom.y-this.belongRoom.height/2;this.self.y=e-20,this.positionOffsetXY()}break;case e.Enum.MoveState.onLadder:if(this.currentLadder){let e=this.currentLadder.x+this.belongRoom.x-this.belongRoom.width/2;this.self.x=e,this.positionOffsetXY()}break;case e.Enum.MoveState.inAir:this.positionOffsetXY()}}positionOffsetXY(){if(this._belongY&&this._belongX)if(this._belongChange)this._belongY=null,this._belongChange=!1;else{let e=this.belongRoom.x-this._belongX,t=this.belongRoom.y-this._belongY;this.self.x=this.self.x+e,this.self.y=this.self.y+t,this._belongX=this.belongRoom.x,this._belongY=this.belongRoom.y}else this.belongRoom&&(this._belongX=this.belongRoom.x,this._belongY=this.belongRoom.y)}gameOverMove(){this.targetP&&this.positionOffsetXY()}scopeControl(){this.belongRoom&&(this.self.x>this.belongRoom.x+this.belongRoom.width/2+30&&(this.self.x=this.belongRoom.x+this.belongRoom.width/2+30),this.self.x<this.belongRoom.x-this.belongRoom.width/2-30&&(this.self.x=this.belongRoom.x-this.belongRoom.width/2-30),this.self.y>this.belongRoom.y+this.belongRoom.height/2+30&&(this.self.y=this.belongRoom.y+this.belongRoom.height/2+30),this.self.y<this.belongRoom.y-this.belongRoom.height/2-30&&(this.self.y=this.belongRoom.y-this.belongRoom.height/2-30))}onUpdate(){if(!e.Global._gameStart)return this.rig.setVelocity({x:0,y:0}),void this.gameOverMove();this.move(),this.positionOffset(),this.scopeControl()}onDisable(){}}class s extends l{notCommon(){this.gzConnect=!1}createskeleton(){this.skeleton=e.Sk.wangziTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height-12,this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.wangziAni.standby,!0)}onTriggerEnter(t,n){if(e.Global._gameStart)switch(t.label){case"wall":this.wallAndPerson(t,n);break;case"floor":this.floorAndPerson(t,n);break;case"ladder":this.ladderAndPerson(t,n);break;case"aisle":this.aisleAndPerson(t,n)}}move(){this.gzConnect?this.moveDirection===e.Enum.PersonDir.left?(this.rig.setVelocity({x:-2.5,y:0}),this.skeleton.scaleX=-1):this.moveDirection===e.Enum.PersonDir.right?(this.rig.setVelocity({x:2.5,y:0}),this.skeleton.scaleX=1):this.moveDirection===e.Enum.PersonDir.up?this.rig.setVelocity({x:0,y:-6}):this.moveDirection===e.Enum.PersonDir.down&&this.rig.setVelocity({x:0,y:6}):this.rig.setVelocity({x:0,y:0})}onUpdate(){if(!e.Global._gameStart)return this.rig.setVelocity({x:0,y:0}),void this.gameOverMove();this.self.scene.UIMain.Gongzhu.UIMain_Gongzhu.necklace&&(this.move(),this.scopeControl()),this.positionOffset()}}class r extends l{constructor(){super(...arguments),this.eatFood=!1}notCommon(){}createskeleton(){this.skeleton=e.Sk.gouTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height,this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.dogAni.walk,!0)}onTriggerEnter(e,t){switch(e.label){case"wall":this.wallAndPerson(e,t);break;case"floor":this.floorAndPerson(e,t);break;case"ladder":this.ladderAndPerson(e,t);break;case"aisle":this.aisleAndPerson(e,t);break;case"wangzi":break;case"doghouse":this.dogAndDoghouse(e,t);break;case"dogfood":this.dogAnddogfood(e,t)}}dogAnddogfood(t,n){console.log("吃了狗粮变大了"),t.owner.removeSelf(),this.skeleton.play(e.Enum.dogAni.standby,!0),this.eatFood=!0,this.moveDirection===e.Enum.PersonDir.left?this.skeleton.scale(1.5,1.5):this.moveDirection===e.Enum.PersonDir.right&&this.skeleton.scale(-1.5,1.5)}dogAndDoghouse(e,t){this.self.removeSelf(),e.owner.getChildByName("sleepPic").visible=!0}move(){this.eatFood?this.rig.setVelocity({x:0,y:0}):this.moveDirection===e.Enum.PersonDir.left?(this.rig.setVelocity({x:-2.1,y:0}),this.skeleton.scaleX=1):this.moveDirection===e.Enum.PersonDir.right?(this.rig.setVelocity({x:2.1,y:0}),this.skeleton.scaleX=-1):this.moveDirection===e.Enum.PersonDir.up?this.rig.setVelocity({x:0,y:-6}):this.moveDirection===e.Enum.PersonDir.down&&this.rig.setVelocity({x:0,y:6})}onUpdate(){if(!e.Global._gameStart)return this.rig.setVelocity({x:0,y:0}),void this.gameOverMove();this.move(),this.positionOffset(),this.scopeControl()}}class h extends l{notCommon(){}createskeleton(){this.skeleton=e.Sk.qingdi_01Tem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height-10,this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.gongzhuAni.walk,!0)}onTriggerEnter(t,n){if(e.Global._gameStart)switch(t.label){case"wall":this.wallAndPerson(t,n);break;case"floor":this.floorAndPerson(t,n);break;case"ladder":this.ladderAndPerson(t,n);break;case"aisle":this.aisleAndPerson(t,n);break;case"wangzi":this.wangziAndPerson(t,n)}}wangziAndPerson(t,n){e.Global._gameStart=!1;let i=t.owner;i.name;this.targetP.x=this.self.x,this.targetP.y=this.self.y,i.UIMain_Wangzi.skeleton.play(e.Enum.wangziAni.win,!0);let a=this.selfScene.UIMain.Gongzhu;a.UIMain_Gongzhu.necklace?a.UIMain_Gongzhu.skeleton.play(e.Enum.gongzhuAni.die_xianglian,!1):a.UIMain_Gongzhu.skeleton.play(e.Enum.gongzhuAni.die,!1),this.skeleton.play(e.Enum.gongzhuAni.win,!0),Laya.timer.frameOnce(100,this,t=>{e.Admin._openScene("UIDefeated",null,null,null)})}}class c extends Laya.Script{constructor(){super()}onEnable(){}onDisable(){}}class u extends e.Admin.Object{lwgInit(){this.ani=this.self.getChildByName("ani"),this.time=0}onUpdate(){this.time++;this.time%15==0?this.ani.skin="Room/ani_fire_03.png":this.time%10==0?this.ani.skin="Room/ani_fire_02.png":this.time%5==0&&(this.ani.skin="Room/ani_fire_01.png")}}class g extends e.Admin.Object{constructor(){super(),this.firstPos=new Laya.Point}lwgInit(){this.self=this.owner;let e=this.self.parent;"staticDog"===this.self.name.substring(0,9)?(this.firstPos.y=e.height-this.self.height/2-9,this.createskeleton_StaticDog(),this.self.x>e.width/2?this.skeleton.scaleX=1:this.skeleton.scaleX=-1):this.firstPos.y=this.self.y,this.firstPos.x=this.self.x}createskeleton_StaticDog(){this.skeleton=e.Sk.gouTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height-5,this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.dogAni.standby,!0)}onUpdate(){"Person"!==this.self.name&&(this.self.x=this.firstPos.x,this.self.y=this.firstPos.y)}onDisable(){}}class m extends Laya.Script{constructor(){super(),this._roomPickup=!1,this._roomMove=!1,this.diffX=null,this.diffY=null}onEnable(){this.self=this.owner,this.selfScene=this.self.scene,this.self.UIMain_Room=this,this.rig=this.self.getComponent(Laya.RigidBody),this.rig.setVelocity({x:0,y:0}),this.btnOnClick(),this.collisionNodeFollow()}collisionNodeFollow(){for(let e=0;e<this.self.numChildren;e++){const t=this.self.getChildAt(e);if(t.getComponent(Laya.RigidBody)){t.getComponent(g)||t.addComponent(g)}}}onTriggerEnter(e,t){}onTriggerStay(){}btnOnClick(){e.Click.on("noEffect",null,this.self,this,this.houseDwon,null,null,null)}houseDwon(){this._roomX=this.self.x,this._roomY=this.self.y,this._roomMove=!0,e.Global._roomPickup=this.self}onStageMouseDown(e){this._stageX||this._stageY||(this._stageX=e.stageX,this._stageY=e.stageY)}onStageMouseMove(e){this._roomMove&&(this.diffX=e.stageX-this._stageX,this.diffY=e.stageY-this._stageY,this.self.x=this._roomX+this.diffX,this.self.y=this._roomY+this.diffY)}onStageMouseUp(){this.selfScene.UIMain.currentRoom=null,this._roomMove=!1,this._roomX=null,this._roomY=null,this._stageX=null,this._stageY=null,this.diffX=null,this.diffY=null}onUpdate(){}onDisable(){}}class f extends l{createskeleton(){this.skeleton=e.Sk.houmaTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height-8,this.self.getChildByName("pic").visible=!1,this.self.getChildByName("apple").visible=!1,this.skeleton.play(e.Enum.gongzhuAni.walk,!0)}onTriggerEnter(t,n){if(e.Global._gameStart)switch(t.label){case"wall":this.wallAndPerson(t,n);break;case"floor":this.floorAndPerson(t,n);break;case"ladder":this.ladderAndPerson(t,n);break;case"aisle":this.aisleAndPerson(t,n)}}}class d extends e.Admin.Object{constructor(){super(...arguments),this.timeSwitch=!0}lwgInit(){this.createskeleton();let e=this.self.getChildByName("Progress").getChildByName("ProgressBar");this.Mask=e.mask}createskeleton(){this.skeleton=e.Sk.houziTem.buildArmature(0),this.self.addChild(this.skeleton),this.skeleton.x=this.self.width/2,this.skeleton.y=this.self.height,this.self.getChildByName("pic").visible=!1,this.skeleton.play(e.Enum.dogAni.standby,!0)}createBanana(){let e,t=this.self,n=this.self.parent;Laya.loader.load("prefab/banana.json",Laya.Handler.create(this,function(i){let a=new Laya.Prefab;a.json=i,e=Laya.Pool.getItemByCreateFun("banana",a.create,a),n.addChild(e),e.pos(t.x,t.y),e.addComponent(g),t.visible=!1}))}onUpdate(){this.timeSwitch&&(this.Mask.x>-78?this.Mask.x-=.5:(this.timeSwitch=!1,console.log("丢下香蕉"),this.createBanana()))}}class p extends e.Admin.Scene{lwgInit(){this.BtnUIStart=this.self.BtnUIStart,this.BtnContinue=this.self.BtnContinue}btnOnClick(){e.Click.on(e.Enum.ClickType.largen,null,this.BtnUIStart,this,null,null,this.BtnUIStartUp,null),e.Click.on(e.Enum.ClickType.largen,null,this.BtnContinue,this,null,null,this.BtnContinueUp,null)}BtnUIStartUp(){e.Admin._openScene("UIStart",null,this.self,null),e.Admin._closeScene(e.Global._gameLevel)}BtnContinueUp(){this.self.close()}}class y extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.BtnVoice=this.self.BtnVoice,this.BtnShake=this.self.BtnShake,this.BtnClose=this.self.BtnClose,this.btnVoiceAndBtnShake(),this.btnClickOn()}btnVoiceAndBtnShake(){let t=this.BtnVoice.getChildAt(0);e.Global._voiceSwitch?t.skin="shezhi/icon_voiceon.png":t.skin="shezhi/icon_voiceoff.png";let n=this.BtnShake.getChildAt(0);e.Global._shakeSwitch?n.skin="shezhi/shake_on.png":n.skin="shezhi/shake_off.png"}btnClickOn(){e.Click.on("largen",null,this.BtnVoice,this,null,null,this.btnVoiceClickUP,null),e.Click.on("largen",null,this.BtnShake,this,null,null,this.btnShakeClickUP,null),e.Click.on("largen",null,this.BtnClose,this,null,null,this.btnCloseClickUP,null)}btnVoiceClickUP(t){let n=this.BtnVoice.getChildAt(0);"shezhi/icon_voiceon.png"===n.skin?(n.skin="shezhi/icon_voiceoff.png",e.Global._voiceSwitch=!1,e.PalyAudio.stopMusic()):"shezhi/icon_voiceoff.png"===n.skin&&(n.skin="shezhi/icon_voiceon.png",e.Global._voiceSwitch=!0,e.PalyAudio.playMusic(e.Enum.voiceUrl.bgm,0,0))}btnShakeClickUP(t){t.currentTarget.scale(1,1);let n=this.BtnShake.getChildAt(0),i="shezhi/shake_on.png",a="shezhi/shake_off.png";n.skin===i?(n.skin=a,e.Global._shakeSwitch=!1):n.skin===a&&(n.skin=i,e.Global._shakeSwitch=!0)}btnCloseClickUP(e){e.currentTarget.scale(1,1),this.self.close()}onDisable(){}}class _ extends e.Admin.Scene{constructor(){super(),this.moveSwitch=!1}lwgInit(){this.BtnStart=this.self.BtnStart,this.CustomsList=this.self.CustomsList,this.BtnPifu=this.self.BtnPifu,this.BtnLocation=this.self.BtnLocation,this.BtnLocation.visible=!1,e.Global._createGoldNum(this.self),e.Global._createExecutionNum(this.self),this.createCustomsList()}createCustomsList(){this.CustomsList.selectEnable=!1,this.CustomsList.vScrollBarSkin="",this.CustomsList.selectHandler=new Laya.Handler(this,this.onSelect_List),this.CustomsList.renderHandler=new Laya.Handler(this,this.updateItem),this.listFirstIndex=e.Global._gameLevel,this.refreshListData(),this.CustomsList.scrollTo(e.Global._CustomsNum),this.listOpenAni()}listOpenAni(){this.CustomsList.tweenTo(this.listFirstIndex,100,Laya.Handler.create(this,e=>{let t=this.CustomsList.getCell(this.listFirstIndex);t.alpha=1;let n=t.getChildByName("pic");this.listFirstIndex%2==0?n.skin="UI_new/GameStart/icon_box01_open.png":n.skin="UI_new/GameStart/icon_box02_open.png"}))}refreshListData(){for(var t=[],n=0;n<e.Global._CustomsNum;n++){let i,a,o=n;n%2==0?(i="UI_new/GameStart/icon_box01.png",a=135):(i="UI_new/GameStart/icon_box02.png",a=155);let l,s=e.Global._CustomsNum-n;l=n>e.Global._gameLevel,t.push({customNum:o,picUrl:i,offsetX:a,zOder:s,lock:l})}this.CustomsList.array=t}onSelect_List(e){}updateItem(t,n){let i=t.dataSource;t.zOrder=i.zOder;let a=t.getChildByName("pic");a.skin=i.picUrl,a.x=i.offsetX,a.getChildByName("LvNum").value=i.customNum.toString(),a.getChildByName("lock").visible=i.lock,t.name="item"+i.customNum,n===this.listFirstIndex?t.alpha=0:t.alpha=1,this.listFirstIndex>e.Global._gameLevel||this.listFirstIndex<e.Global._gameLevel-3?this.BtnLocation.visible=!0:this.BtnLocation.visible=!1}onStageMouseDown(){this.firstY=Laya.MouseManager.instance.mouseY,this.moveSwitch=!0}onStageMouseUp(){let t=Laya.MouseManager.instance.mouseY;if(!this.moveSwitch)return;let n=t-this.firstY;n>10?(this.listFirstIndex-=1,this.listFirstIndex<1?this.listFirstIndex=1:this.createAddHouse()):n<-10&&(this.listFirstIndex+=1,this.listFirstIndex>e.Global._CustomsNum?this.listFirstIndex=e.Global._CustomsNum:this.creatSubHouse()),this.moveSwitch=!1,this.CustomsList.tweenTo(this.listFirstIndex,100,Laya.Handler.create(this,e=>{console.log(this.CustomsList.startIndex),console.log(this.listFirstIndex)}))}createAddHouse(){let t=Laya.Pool.getItemByCreateFun("house",this.house.create,this.house);Laya.stage.addChild(t),t.pos(this.CustomsList.x-400,this.CustomsList.y-300),t.UIStart_House.index=this.listFirstIndex,e.Animation.move_Simple(t,t.x,t.y,this.CustomsList.x,this.CustomsList.y,600,0,e=>{t.removeSelf();let n=this.CustomsList.getCell(t.UIStart_House.index);if(n){n.alpha=1;let e=n.getChildByName("pic");t.UIStart_House.index%2==0?e.skin="UI_new/GameStart/icon_box01_open.png":e.skin="UI_new/GameStart/icon_box02_open.png"}let i=this.CustomsList.getCell(t.UIStart_House.index+1);if(i){let e=i.getChildByName("pic");(t.UIStart_House.index+1)%2==0?e.skin="UI_new/GameStart/icon_box01.png":e.skin="UI_new/GameStart/icon_box02.png"}});let n=t.getChildByName("pic");n.getChildByName("LvNum").value=this.listFirstIndex.toString(),this.listFirstIndex%2==0?(n.skin="UI_new/GameStart/icon_box01_open.png",n.x=135):(n.skin="UI_new/GameStart/icon_box02_open.png",n.x=155);let i=n.getChildByName("lock");this.listFirstIndex>e.Global._gameLevel?i.visible=!0:i.visible=!1,e.Animation.simple_Rotate(n,250,360,600,null)}creatSubHouse(){let t=this.CustomsList.getCell(this.listFirstIndex);if(t){let e=t.getChildByName("pic");this.listFirstIndex%2==0?e.skin="UI_new/GameStart/icon_box01_open.png":e.skin="UI_new/GameStart/icon_box02_open.png"}let n=Laya.Pool.getItemByCreateFun("house",this.house.create,this.house);Laya.stage.addChild(n),n.pos(this.CustomsList.x,this.CustomsList.y),e.Animation.move_Simple(n,n.x,n.y,this.CustomsList.x+800,this.CustomsList.y+500,1e3,0,e=>{n.removeSelf()});let i=n.getChildByName("pic");i.getChildByName("LvNum").value=(this.listFirstIndex-1).toString(),this.listFirstIndex%2==0?i.skin="UI_new/GameStart/icon_box02_open.png":i.skin="UI_new/GameStart/icon_box01_open.png";let a=i.getChildByName("lock");this.listFirstIndex>e.Global._gameLevel?a.visible=!0:a.visible=!1,e.Animation.simple_Rotate(i,0,180,1e3,null)}btnOnClick(){e.Click.on(e.Enum.ClickType.largen,null,this.BtnStart,this,null,null,this.btnStartClickUp,null),e.Click.on(e.Enum.ClickType.largen,null,this.BtnPifu,this,null,null,this.btnPifuClickUp,null),e.Click.on(e.Enum.ClickType.noEffect,null,this.BtnLocation,this,null,null,this.btnLocationUp,null),e.Click.on(e.Enum.ClickType.noEffect,null,this.CustomsList,this,null,null,this.customsListUp,null)}btnStartClickUp(t){t.currentTarget.scale(1,1),e.Global._gameStart=!0,e.Admin._openCustomsScene(),this.self.close()}btnPifuClickUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noPifu)}btnLocationUp(t){t.currentTarget.scale(1,1),this.listFirstIndex=e.Global._gameLevel,this.CustomsList.refresh(),this.createAddHouse()}cellStyle(t){let n=t.getChildByName("pic");this.listFirstIndex%2==0?n.skin="UI_new/GameStart/icon_box01_open.png":n.skin="UI_new/GameStart/icon_box02_open.png";let i=n.getChildByName("lock");this.listFirstIndex>e.Global._gameLevel?i.visible=!0:i.visible=!1}customsListUp(){}onDisable(){}}class b extends e.Admin.Object{constructor(){super()}lwgInit(){}onDisable(){}}class L extends e.Admin.Scene{constructor(){super()}lwgInit(){this.BtnGoldAdv=this.self.BtnGoldAdv,this.BtnExAdv=this.self.BtnExAdv,this.GetGold=this.self.GetGold,this.LvNum=this.self.LvNum,this.LvNum.value=e.Global._gameLevel.toString(),this.BtnLast=this.self.BtnLast,e.Global._createGoldNum(this.self),e.Global._createExecutionNum(this.self),this.getGoldDisplay()}getGoldDisplay(){let t=this.GetGold.getChildByName("Num");e.Global._gameLevel;t.value="x25",console.log("普通关卡奖励金币为："+t.value)}accordingLv(){this.AccordingLv.getChildByName("CurrentLv").text=e.Global._gameLevel.toString(),e.Global._gameLevel++,this.AccordingLv.getChildByName("NextLv").text=e.Global._gameLevel.toString()}btnOnClick(){e.Click.on("largen",null,this.BtnLast,this,null,null,this.btnLastUp,null),e.Click.on("largen",null,this.BtnGoldAdv,this,null,null,this.BtnGoldAdvUp,null),e.Click.on("largen",null,this.BtnExAdv,this,null,null,this.BtnExAdvUp,null)}btnLastUp(){let t;e.Admin._closeScene(e.Global._gameLevel),e.Global._gameLevel++,e.Global._gameLevel>10&&(e.Global._gameLevel=1),e.Global._gameLevel<=9?t="UIMain_00"+e.Global._gameLevel:(9<e.Global._gameLevel||e.Global._gameLevel<=99)&&(t="UIMain_0"+e.Global._gameLevel),e.Admin._openScene(t,1,this.self,e=>{}),e.Global._goldNum+=25}BtnGoldAdvUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noAdv)}BtnExAdvUp(t){t.currentTarget.scale(1,1),e.Global._createHint(e.Enum.HintType.noAdv)}onDisable(){}}class k{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("script/Game/UIDefeated.ts",t),e("script/Game/UILoding.ts",i),e("script/Game/UIMain.ts",n),e("script/Game/UIMain_StaticDog.ts",a),e("script/Game/UIMain_Aisle.ts",o),e("script/Game/UIMain_Wangzi.ts",s),e("script/Game/UIMain_Dog.ts",r),e("script/Game/UIMain_Rival.ts",h),e("script/Game/UIMain_Person.ts",c),e("script/Game/UIMain_Bonfire.ts",u),e("script/Game/UIMain_Room.ts",m),e("script/Game/UIMain_Gongzhu.ts",l),e("script/Game/UIMain_Houma.ts",f),e("script/Game/UIMain_Houzi.ts",d),e("script/Game/UIMain_Puase.ts",p),e("script/Game/UISet.ts",y),e("script/Game/UIStart.ts",_),e("script/Game/UIStart_House.ts",b),e("script/Game/UIVictory.ts",L)}}k.width=720,k.height=1280,k.scaleMode="fixedwidth",k.screenMode="vertical",k.alignV="top",k.alignH="left",k.startScene="Scene/UILoding.scene",k.sceneRoot="",k.debug=!1,k.stat=!0,k.physicsDebug=!1,k.exportSceneToJson=!0,k.init();new class{constructor(){window.Laya3D?Laya3D.init(k.width,k.height):Laya.init(k.width,k.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=k.scaleMode,Laya.stage.screenMode=k.screenMode,Laya.stage.alignV=k.alignV,Laya.stage.alignH=k.alignH,Laya.URL.exportSceneToJson=k.exportSceneToJson,(k.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),k.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),k.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){k.startScene&&Laya.Scene.open(k.startScene)}}}();