{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport UIMain_Follow from \"./UIMain_Follow\";\r\nexport default class UIMain_Room extends lwg.Admin.Object {\r\n    constructor() {\r\n        super();\r\n        this._roomMove = false;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    lwgInit() {\r\n        this.self.pivotX = this.self.width / 2;\r\n        this.self.pivotY = this.self.height / 2;\r\n        this.self['UIMain_Room'] = this;\r\n        this.rig = this.self.getComponent(Laya.RigidBody);\r\n        this.rig.setVelocity({ x: 0, y: 0 });\r\n        this.fX = this.self.x;\r\n        this.fY = this.self.y;\r\n        this.collisionNodeFollow();\r\n        this.boxColliderSet();\r\n        this.wallpaperSet();\r\n    }\r\n    boxColliderSet() {\r\n        let boxCol = this.self.getComponent(Laya.BoxCollider);\r\n        boxCol.width = this.self.width - 6;\r\n        boxCol.height = this.self.height - 6;\r\n        boxCol.x = 3;\r\n        boxCol.y = 3;\r\n    }\r\n    wallpaperSet() {\r\n        let wallpaper = this.self.getChildByName('wallpaper');\r\n        if (wallpaper) {\r\n            wallpaper.removeSelf();\r\n        }\r\n        let wallpaper0 = new Laya.Image();\r\n        let selfSkin = this.self.skin;\r\n        wallpaper0.skin = 'Room/room_green.png';\r\n        this.self.addChild(wallpaper0);\r\n        wallpaper0.pos(0, 0);\r\n        wallpaper0.height = 51;\r\n        wallpaper0.width = 51;\r\n        wallpaper0.y = this.self.height - 51 - 15.5;\r\n    }\r\n    collisionNodeFollow() {\r\n        for (let index = 0; index < this.self.numChildren; index++) {\r\n            const child = this.self.getChildAt(index);\r\n            let rig = child.getComponent(Laya.RigidBody);\r\n            if (rig) {\r\n                let followScript = child.getComponent(UIMain_Follow);\r\n                if (!followScript) {\r\n                    child.addComponent(UIMain_Follow);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onTriggerEnter(other, self) {\r\n    }\r\n    onTriggerStay() {\r\n    }\r\n    btnOnClick() {\r\n        lwg.Click.on('noEffect', null, this.self, this, this.houseDwon, null, null, null);\r\n    }\r\n    houseDwon() {\r\n        if (!lwg.Global._gameStart) {\r\n            return;\r\n        }\r\n        if (lwg.Global._gameLevel === 1 && this.self.name === 'Room2') {\r\n            return;\r\n        }\r\n        this._roomX = this.self.x;\r\n        this._roomY = this.self.y;\r\n        this._roomMove = true;\r\n        lwg.Global._roomPickup = this.self;\r\n    }\r\n    onStageMouseDown(e) {\r\n        if (!this._stageX && !this._stageY) {\r\n            this._stageX = e.stageX;\r\n            this._stageY = e.stageY;\r\n        }\r\n    }\r\n    onStageMouseMove(e) {\r\n        if (this._roomMove) {\r\n            this.diffX = e.stageX - this._stageX;\r\n            this.diffY = e.stageY - this._stageY;\r\n            this.self.x = this._roomX + this.diffX;\r\n            this.self.y = this._roomY + this.diffY;\r\n        }\r\n    }\r\n    onStageMouseUp() {\r\n        this.selfScene['UIMain'].currentRoom = null;\r\n        this._roomMove = false;\r\n        this._roomX = null;\r\n        this._roomY = null;\r\n        this._stageX = null;\r\n        this._stageY = null;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    onUpdate() {\r\n        if (lwg.Global._gameLevel === 1 && this.self.name === 'Room2') {\r\n            this.self.x = this.fX;\r\n            this.self.y = this.fY;\r\n            return;\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Game/UIMain_Follow.ts"
  ]
}
