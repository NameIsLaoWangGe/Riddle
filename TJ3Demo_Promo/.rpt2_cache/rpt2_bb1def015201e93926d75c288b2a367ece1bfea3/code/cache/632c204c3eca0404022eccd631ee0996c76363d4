{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nexport default class UIMain_Aisle extends lwg.Admin.Object {\r\n    constructor() {\r\n        super();\r\n        this.openSwitch = false;\r\n        this.oppositeAisle = null;\r\n        this.connectRoom = null;\r\n    }\r\n    lwgInit() {\r\n        this.interactionPicStyle('exit');\r\n        this.picColor();\r\n    }\r\n    picColor() {\r\n        let parent = this.self.parent;\r\n        let pSkin = parent.skin;\r\n        let wall = this.self.getChildByName('wall');\r\n        let color = this.self.getChildByName('color');\r\n        switch (pSkin) {\r\n            case lwg.Enum.RoomSkin.blue:\r\n                wall.skin = lwg.Enum.WallSkin.blue;\r\n                color.skin = lwg.Enum.AisleColorSkin.blue;\r\n                break;\r\n            case lwg.Enum.RoomSkin.bluish:\r\n                wall.skin = lwg.Enum.WallSkin.bluish;\r\n                color.skin = lwg.Enum.AisleColorSkin.bluish;\r\n                break;\r\n            case lwg.Enum.RoomSkin.grass:\r\n                wall.skin = lwg.Enum.WallSkin.grass;\r\n                color.skin = lwg.Enum.AisleColorSkin.grass;\r\n                break;\r\n            case lwg.Enum.RoomSkin.green:\r\n                wall.skin = lwg.Enum.WallSkin.green;\r\n                color.skin = lwg.Enum.AisleColorSkin.green;\r\n                break;\r\n            case lwg.Enum.RoomSkin.pink:\r\n                wall.skin = lwg.Enum.WallSkin.pink;\r\n                color.skin = lwg.Enum.AisleColorSkin.pink;\r\n                break;\r\n            case lwg.Enum.RoomSkin.purple:\r\n                wall.skin = lwg.Enum.WallSkin.purple;\r\n                color.skin = lwg.Enum.AisleColorSkin.purple;\r\n                break;\r\n            case lwg.Enum.RoomSkin.red:\r\n                wall.skin = lwg.Enum.WallSkin.red;\r\n                color.skin = lwg.Enum.AisleColorSkin.red;\r\n                break;\r\n            case lwg.Enum.RoomSkin.yellow:\r\n                wall.skin = lwg.Enum.WallSkin.yellow;\r\n                color.skin = lwg.Enum.AisleColorSkin.yellow;\r\n                break;\r\n            case lwg.Enum.RoomSkin.yellowish:\r\n                wall.skin = lwg.Enum.WallSkin.yellowish;\r\n                color.skin = lwg.Enum.AisleColorSkin.yellowish;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onTriggerEnter(other, self) {\r\n        let otherName = other.owner.name;\r\n        let selfName = this.self.name;\r\n        if (other.label === 'aisle' && self.label === 'aisle') {\r\n        }\r\n        else if (other.label === 'interaction' && self.label === 'interaction') {\r\n            let n1 = otherName.substring(0, 1);\r\n            let n2 = selfName.substring(0, 1);\r\n            if ((n1 === 'l' && n2 === 'r') || (n1 === 'r' && n2 === 'l') || (n1 === 'u' && n2 === 'd') || (n1 === 'd' && n2 === 'u')) {\r\n                this.connectRoom = other.owner.parent;\r\n                this.oppositeAisle = other.owner;\r\n                this.interactionPicStyle('enter');\r\n            }\r\n        }\r\n    }\r\n    interactionPicStyle(type) {\r\n        let interaction = this.self.getChildByName('interaction');\r\n        let url1 = 'Room/ui_interaction_01.png';\r\n        let url2 = 'Room/ui_interaction_02.png';\r\n        if (type === 'enter') {\r\n            interaction.skin = url2;\r\n        }\r\n        else if (type === 'exit') {\r\n            interaction.skin = url1;\r\n        }\r\n    }\r\n    roomAdsorption() {\r\n        let posX = this.oppositeAisle.x + this.connectRoom.x - this.connectRoom.width / 2;\r\n        let posY = this.oppositeAisle.y + this.connectRoom.y - this.connectRoom.height / 2;\r\n        let parent = this.self.parent;\r\n        let selfX = this.self.x + parent.x - parent.width / 2;\r\n        ;\r\n        let selfY = this.self.y + parent.y - parent.height / 2;\r\n        let diffX = posX - selfX;\r\n        let diffY = posY - selfY;\r\n        if ((Math.abs(diffX) > 100 || Math.abs(diffY) > 100)) {\r\n            return;\r\n        }\r\n        let _roomMove = parent['UIMain_Room']._roomMove;\r\n        if (!_roomMove && lwg.Global._roomPickup === parent) {\r\n            Laya.Tween.clearAll(this);\r\n            lwg.Animation.move_Simple(parent, parent.x, parent.y, parent.x + diffX, parent.y + diffY, 10, 0, f => { });\r\n            parent['UIMain_Room']._roomMove = false;\r\n            lwg.Global._roomPickup = null;\r\n            lwg.Effects.createCommonExplosion(Laya.stage, 15, posX, posY);\r\n        }\r\n        if ((Math.abs(diffX) > 10 || Math.abs(diffY) > 10) || parent['UIMain_Room']._roomMove) {\r\n            this.openSwitch = false;\r\n            let wangzi = this.selfScene['UIMain'].Wangzi;\r\n            wangzi['UIMain_Wangzi'].gzConnect = false;\r\n            if (lwg.Global._gameLevel === 1 && this.selfScene['Finger'] && this.selfScene['Wangzi']['UIMain_Wangzi'].belongRoom !== this.selfScene['Gongzhu']['UIMain_Gongzhu'].belongRoom) {\r\n                if (this.selfScene['Finger']) {\r\n                    this.selfScene['Finger'].alpha = 1;\r\n                    this.selfScene['guideRoom'].alpha = 0.3;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.openSwitch = true;\r\n            this.gzAndWzConnect();\r\n            if (lwg.Global._gameLevel === 1 && this.selfScene['Finger']) {\r\n                if (this.selfScene['Finger']) {\r\n                    this.selfScene['Finger'].alpha = 0;\r\n                    this.selfScene['guideRoom'].alpha = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    styleChanges() {\r\n        let interaction = this.self.getChildByName('interaction');\r\n        let color = this.self.getChildByName('color');\r\n        let wall = this.self.getChildByName('wall');\r\n        if (this.openSwitch) {\r\n            interaction.alpha = 0;\r\n            color.alpha = 0;\r\n            wall.alpha = 1;\r\n        }\r\n        else {\r\n            interaction.alpha = 1;\r\n            color.alpha = 1;\r\n            wall.alpha = 0;\r\n        }\r\n    }\r\n    gzAndWzConnect() {\r\n        let gongzhu = this.selfScene['UIMain'].Gongzhu;\r\n        let wangzi = this.selfScene['UIMain'].Wangzi;\r\n        let gongzhuRoom = gongzhu['UIMain_Gongzhu'].belongRoom;\r\n        let wangziRoom = wangzi['UIMain_Wangzi'].belongRoom;\r\n        let parent = this.self.parent;\r\n        if ((gongzhuRoom === parent && wangziRoom === this.connectRoom) || (wangziRoom === parent && gongzhuRoom === this.connectRoom)) {\r\n            wangzi['UIMain_Wangzi'].gzConnect = true;\r\n        }\r\n    }\r\n    onTriggerExit(other, self) {\r\n        let otherName = other.owner.name;\r\n        let selfName = this.self.name;\r\n        if (other.label === 'aisle' && self.label === 'aisle') {\r\n        }\r\n        else if (other.label === 'interaction' && self.label === 'interaction') {\r\n            this.openSwitch = false;\r\n            this.connectRoom = null;\r\n            this.oppositeAisle = null;\r\n            let n1 = otherName.substring(0, 1);\r\n            let n2 = selfName.substring(0, 1);\r\n            this.interactionPicStyle('exit');\r\n        }\r\n    }\r\n    roomDistanceJudge() {\r\n        let parent = this.self.parent;\r\n        for (let index = 0; index < this.selfScene.numChildren; index++) {\r\n            const element = this.selfScene.getChildAt(index);\r\n            if (element.name.substring(0, 4) === 'Room' && element !== parent) {\r\n                if (this.self.name.substring(0, 1) === 'l' || this.self.name.substring(0, 1) === 'r') {\r\n                    if (Math.abs(element.x - parent.x) > element.width / 2 + parent.width / 2 + 100) {\r\n                        this.interactionPicStyle('exit');\r\n                    }\r\n                }\r\n                else if (this.self.name.substring(0, 1) === 'u' || this.self.name.substring(0, 1) === 'd') {\r\n                    if (Math.abs(element.y - parent.y) > element.height / 2 + parent.height / 2 + 100) {\r\n                        this.interactionPicStyle('exit');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onUpdate() {\r\n        if (this.connectRoom && this.oppositeAisle) {\r\n            this.roomAdsorption();\r\n        }\r\n        this.styleChanges();\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts"
  ]
}
