{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport UIMain_Follow from \"./UIMain_Follow\";\r\nexport default class UIMain_Room extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this._roomMove = false;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.selfScene = this.self.scene;\r\n        this.self['UIMain_Room'] = this;\r\n        this.rig = this.self.getComponent(Laya.RigidBody);\r\n        this.rig.setVelocity({ x: 0, y: 0 });\r\n        this.fX = this.self.x;\r\n        this.fY = this.self.y;\r\n        this.btnOnClick();\r\n        this.collisionNodeFollow();\r\n    }\r\n    collisionNodeFollow() {\r\n        for (let index = 0; index < this.self.numChildren; index++) {\r\n            const child = this.self.getChildAt(index);\r\n            let rig = child.getComponent(Laya.RigidBody);\r\n            if (rig) {\r\n                let followScript = child.getComponent(UIMain_Follow);\r\n                if (!followScript) {\r\n                    child.addComponent(UIMain_Follow);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onTriggerEnter(other, self) {\r\n    }\r\n    onTriggerStay() {\r\n    }\r\n    btnOnClick() {\r\n        lwg.Click.on('noEffect', null, this.self, this, this.houseDwon, null, null, null);\r\n    }\r\n    houseDwon() {\r\n        if (!lwg.Global._gameStart) {\r\n            return;\r\n        }\r\n        if (lwg.Global._gameLevel === 1 && this.self.name === 'Room2') {\r\n            return;\r\n        }\r\n        this._roomX = this.self.x;\r\n        this._roomY = this.self.y;\r\n        this._roomMove = true;\r\n        lwg.Global._roomPickup = this.self;\r\n    }\r\n    onStageMouseDown(e) {\r\n        if (!this._stageX && !this._stageY) {\r\n            this._stageX = e.stageX;\r\n            this._stageY = e.stageY;\r\n        }\r\n    }\r\n    onStageMouseMove(e) {\r\n        if (this._roomMove) {\r\n            this.diffX = e.stageX - this._stageX;\r\n            this.diffY = e.stageY - this._stageY;\r\n            this.self.x = this._roomX + this.diffX;\r\n            this.self.y = this._roomY + this.diffY;\r\n        }\r\n    }\r\n    onStageMouseUp() {\r\n        this.selfScene['UIMain'].currentRoom = null;\r\n        this._roomMove = false;\r\n        this._roomX = null;\r\n        this._roomY = null;\r\n        this._stageX = null;\r\n        this._stageY = null;\r\n        this.diffX = null;\r\n        this.diffY = null;\r\n    }\r\n    onUpdate() {\r\n        if (lwg.Global._gameLevel === 1 && this.self.name === 'Room2') {\r\n            this.self.x = this.fX;\r\n            this.self.y = this.fY;\r\n            return;\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Game/UIMain_Follow.ts"
  ]
}
