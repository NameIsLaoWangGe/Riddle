{
  "code": "import CaiDanData from \"./CaidanData\";\r\nimport SkinItem from \"./SkinItem\";\r\nimport { lwg } from \"../script/Lwg_Template/lwg\";\r\nimport ADManager, { TaT } from \"../TJ/Admanager\";\r\nexport default class CaiDanQiang extends Laya.Script {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.icon = [\r\n            { ID: 0, Name: \"黄皮耗子\", Info: \"\", MesLiayuan: \"转盘\", MesFangshi: \"直接把它从转盘拖出来\", Tip: lwg.Enum.CaidanPifuName.huangpihaozi },\r\n            { ID: 1, Name: \"自闭鸭子\", Info: \"\", MesLiayuan: \"转盘\", MesFangshi: \"转盘抽奖获得\", Tip: lwg.Enum.CaidanPifuName.zibiyazi },\r\n            { ID: 2, Name: \"仓鼠公主\", Info: \"\", MesLiayuan: \"从彩蛋墙上的神蛋获得\", MesFangshi: \"点击左边的神蛋\", Tip: lwg.Enum.CaidanPifuName.cangshugongzhu },\r\n            { ID: 3, Name: \"柯基公主\", Info: \"\", MesLiayuan: \"召唤神龙许愿概率获得\", MesFangshi: \"同时点击彩弹墙的两个彩蛋\", Tip: lwg.Enum.CaidanPifuName.kejigongzhu },\r\n            { ID: 4, Name: \"塞牙人\", Info: \"（也可能不是）\", MesLiayuan: \"彩蛋墙内神秘操作获得\", MesFangshi: \"长按这个皮肤的剪影3秒\", Tip: lwg.Enum.CaidanPifuName.saiyaren },\r\n            { ID: 5, Name: \"海绵公主\", Info: \"\", MesLiayuan: \"主界面神秘操作获得\", MesFangshi: \"同时点击皮肤和彩蛋墙按钮\", Tip: lwg.Enum.CaidanPifuName.haimiangongzhu },\r\n        ];\r\n        this.Caidan = [];\r\n        this.CaiDanDatas1 = [];\r\n        this.CaiDanDatas2 = [];\r\n        this.Skin = [];\r\n        this.Skinitems = [];\r\n        this.ImageX = 0;\r\n        this.ImageY = 0;\r\n        this.xmin = 160;\r\n        this.xmax = 255;\r\n        this.ymin = 103;\r\n        this.ymax = 210;\r\n        this.CanGet = false;\r\n        this.props = [];\r\n        this.Rewardindex = 5;\r\n    }\r\n    LoadXml() {\r\n        let self = this;\r\n        let loadXml = function () {\r\n            self.LoadXml2();\r\n        };\r\n        Laya.loader.load(\"CaiDanQIang/CaiDanConfig.xml\", Laya.Handler.create(this, function () {\r\n            loadXml();\r\n        }));\r\n    }\r\n    LoadXml2() {\r\n        let xmlDom = Laya.Loader.getRes(\"CaiDanQIang/CaiDanConfig.xml\");\r\n        console.log(xmlDom);\r\n        let attr = xmlDom.childNodes[0].childNodes;\r\n        for (var i = 0; i < attr.length; i++) {\r\n            let temp = new CaiDanData();\r\n            for (var j = 0; j < attr[i].attributes.length; j++) {\r\n                if (attr[i].attributes[j].nodeName == \"ID\") {\r\n                    temp.ID = parseInt(attr[i].attributes[j].nodeValue);\r\n                }\r\n                else if (attr[i].attributes[j].nodeName == \"Name\") {\r\n                    temp.Name = attr[i].attributes[j].nodeValue;\r\n                }\r\n                else if (attr[i].attributes[j].nodeName == \"MesLiayuan\") {\r\n                    temp.MesLiayuan = attr[i].attributes[j].nodeValue;\r\n                }\r\n                else if (attr[i].attributes[j].nodeName == \"MesFangshi\") {\r\n                    temp.MesFangshi = attr[i].attributes[j].nodeValue;\r\n                }\r\n                else if (attr[i].attributes[j].nodeName == \"Info\") {\r\n                    temp.Info = attr[i].attributes[j].nodeValue;\r\n                }\r\n            }\r\n            console.log(temp);\r\n            this.CaiDanDatas1.push(temp);\r\n        }\r\n    }\r\n    LoadJson() {\r\n        for (let i = 0; i < this.icon.length; i++) {\r\n            let temp = new CaiDanData();\r\n            temp.ID = this.icon[i].ID;\r\n            temp.Name = this.icon[i].Name;\r\n            temp.Info = this.icon[i].Info;\r\n            temp.MesLiayuan = this.icon[i].MesLiayuan;\r\n            temp.MesFangshi = this.icon[i].MesFangshi;\r\n            temp.Tip = this.icon[i].Tip;\r\n            this.CaiDanDatas2.push(temp);\r\n        }\r\n    }\r\n    StorageInit() {\r\n        let firstuse = Laya.LocalStorage.getItem(\"firstuse\");\r\n        if (firstuse) {\r\n            if (firstuse == \"0\") {\r\n                this.CaiDanDatas2.forEach((v) => {\r\n                    Laya.LocalStorage.setItem(\"Caidanskin\" + v.ID, \"0_0_0\");\r\n                });\r\n                Laya.LocalStorage.setItem(\"firstuse\", \"1\");\r\n            }\r\n            else {\r\n                this.CaiDanDatas2.forEach((v) => {\r\n                    if (Laya.LocalStorage.getItem(\"Caidanskin\" + v.ID)) {\r\n                    }\r\n                    else {\r\n                        Laya.LocalStorage.setItem(\"Caidanskin\" + v.ID, \"0_0_0\");\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.CaiDanDatas2.forEach((v) => {\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + v.ID, \"0_0_0\");\r\n            });\r\n            Laya.LocalStorage.setItem(\"firstuse\", \"1\");\r\n        }\r\n        if (lwg.Global._huangpihaozi) {\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 5);\r\n            if (skin) {\r\n                let strs = skin.split(\"_\");\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 0, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            }\r\n            else {\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 0, \"1\" + \"_\" + 0 + \"_\" + 0);\r\n            }\r\n        }\r\n        if (lwg.Global._zibiyazi) {\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 5);\r\n            if (skin) {\r\n                let strs = skin.split(\"_\");\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 1, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            }\r\n            else {\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 1, \"1\" + \"_\" + 0 + \"_\" + 0);\r\n            }\r\n        }\r\n        if (lwg.Global._haimiangongzhu) {\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 5);\r\n            if (skin) {\r\n                let strs = skin.split(\"_\");\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 5, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            }\r\n            else {\r\n                Laya.LocalStorage.setItem(\"Caidanskin\" + 5, \"1\" + \"_\" + 0 + \"_\" + 0);\r\n            }\r\n        }\r\n    }\r\n    onAwake() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADreward1bt_CDwall');\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADreward2bt_CDwall');\r\n        ADManager.TAPoint(TaT.BtnShow, 'close_CDwall');\r\n        ADManager.CloseBanner();\r\n        this.LoadJson();\r\n        this.Caidanqiang = this.owner;\r\n        this.CaiDanShow = this.Caidanqiang.getChildByName(\"CaiDanShow\");\r\n        this.List0 = this.CaiDanShow.getChildByName(\"List0\");\r\n        this.List1 = this.CaiDanShow.getChildByName(\"List1\");\r\n        this.MesShow = this.Caidanqiang.getChildByName(\"MesShow\");\r\n        this.Icon = this.MesShow.getChildByName(\"Icon\");\r\n        this.IconDown = this.Icon.getChildByName(\"IconDown\");\r\n        this.IconUp = this.Icon.getChildByName(\"IconUp\");\r\n        this.IconUp_w = this.Icon.getChildByName(\"IconUp_w\");\r\n        this.MesLaiyuan = this.MesShow.getChildByName(\"MesLaiyuan\");\r\n        this.MesFangshi = this.MesShow.getChildByName(\"MesFangshi\");\r\n        this.Name = this.MesShow.getChildByName(\"Name\");\r\n        this.Info = this.MesShow.getChildByName(\"Info\");\r\n        this.LaiyuanADSafe = this.MesShow.getChildByName(\"LaiyuanADSafe\");\r\n        this.FangshiADSafe = this.MesShow.getChildByName(\"FangshiADSafe\");\r\n        lwg.Click.on(lwg.Click.ClickType.noEffect, null, this.LaiyuanADSafe, this, null, null, this.LaiyuanADcLICK, null);\r\n        lwg.Click.on(lwg.Click.ClickType.noEffect, null, this.FangshiADSafe, this, null, null, this.FangshiADClick, null);\r\n        lwg.Click.on(lwg.Click.ClickType.largen, null, this.owner.scene['BtnBack'], this, null, null, this.btnBackUP, null);\r\n        this.CaidanRewardPanelinit1();\r\n        this.CaiDanInit();\r\n    }\r\n    btnBackUP(e) {\r\n        ADManager.TAPoint(TaT.BtnClick, 'close_CDwall');\r\n        e.currentTarget.scale(1, 1);\r\n        this.owner.scene.close();\r\n    }\r\n    onStart() {\r\n        this.StorageInit();\r\n        for (let i = 0; i < this.CaiDanShow.numChildren; i++) {\r\n            let listitem = this.CaiDanShow.getChildAt(i);\r\n            let itembox = listitem.getChildByName(\"ItermBox\");\r\n            for (let j = 0; j < itembox.numChildren; j++) {\r\n                this.Skin.push(itembox.getChildAt(j));\r\n                let a = itembox.getChildAt(j).getComponent(SkinItem);\r\n                this.Skinitems.push(a);\r\n            }\r\n        }\r\n        this.Skinitems.forEach((v, i) => {\r\n            v.Fell(this.CaiDanDatas2[i], this.Caidanqiang);\r\n        });\r\n        if (lwg.Global._pickPaintedNum) {\r\n            this.CaiDanDatas2.forEach((v, i) => {\r\n                if (v.ID === lwg.Global._pickPaintedNum) {\r\n                    this.NowCaidanDataq = v;\r\n                }\r\n                else {\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.NowCaidanDataq = this.CaiDanDatas2[0];\r\n        }\r\n    }\r\n    RefreshView(skindata) {\r\n        this.NowCaidanDataq = skindata;\r\n        lwg.Global._pickPaintedNum = this.NowCaidanDataq.ID;\r\n        this.IconDown.skin = skindata.GetIconPath();\r\n        this.IconUp.skin = skindata.GetIconPath_h();\r\n        this.MesFangshi.text = skindata.MesFangshi;\r\n        this.MesLaiyuan.text = skindata.MesLiayuan;\r\n        this.Name.text = skindata.Name;\r\n        this.Info.text = skindata.Info;\r\n        let itemstorage = Laya.LocalStorage.getItem(\"Caidanskin\" + skindata.ID);\r\n        let strs = itemstorage.split(\"_\");\r\n        this.IconUp.visible = strs[0] == \"0\";\r\n        this.IconUp_w.visible = this.IconUp.visible;\r\n        this.LaiyuanADSafe.visible = strs[1] == \"0\";\r\n        this.FangshiADSafe.visible = strs[2] == \"0\";\r\n        this.Skinitems.forEach((v, i) => {\r\n            v.lightChange(skindata.ID);\r\n        });\r\n    }\r\n    FangshiADClick() {\r\n        ADManager.ShowReward(() => {\r\n            ADManager.TAPoint(TaT.BtnClick, 'ADreward2bt_CDwall');\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + this.NowCaidanDataq.ID);\r\n            let strs = skin.split(\"_\");\r\n            Laya.LocalStorage.setItem(\"Caidanskin\" + this.NowCaidanDataq.ID, strs[0] + \"_\" + strs[1] + \"_\" + \"1\");\r\n            this.RefreshView(this.NowCaidanDataq);\r\n        });\r\n    }\r\n    LaiyuanADcLICK() {\r\n        ADManager.TAPoint(TaT.BtnClick, 'ADreward1bt_CDwall');\r\n        ADManager.ShowReward(() => {\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + this.NowCaidanDataq.ID);\r\n            let strs = skin.split(\"_\");\r\n            Laya.LocalStorage.setItem(\"Caidanskin\" + this.NowCaidanDataq.ID, strs[0] + \"_\" + \"1\" + \"_\" + strs[2]);\r\n            this.RefreshView(this.NowCaidanDataq);\r\n        });\r\n    }\r\n    CaidanRewardPanelinit1() {\r\n        this.CaidanRewardPanel1 = this.Caidanqiang.getChildByName(\"CaidanRewardPanel\");\r\n        console.log(this.CaidanRewardPanel1);\r\n        this.RewardBg1 = this.CaidanRewardPanel1.getChildByName(\"RewardBG\");\r\n        console.log(this.RewardBg1);\r\n        this.ADGetReward1 = this.RewardBg1.getChildByName(\"ADGetReward\");\r\n        this.CloseRewardBtn1 = this.RewardBg1.getChildByName(\"CloseRewardBtn\");\r\n        console.log(this.ADGetReward1);\r\n        console.log(this.CloseRewardBtn1);\r\n        this.CaidanJiemianHide1();\r\n        this.ADGetReward1.on(Laya.Event.CLICK, this, this.ADGetRewardClick1);\r\n        this.CloseRewardBtn1.on(Laya.Event.CLICK, this, this.CaidanJiemianHide1);\r\n    }\r\n    CaidanJiemianShow1() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_SYskin');\r\n        ADManager.TAPoint(TaT.PageEnter, 'SYskinpage');\r\n        this.CaidanRewardPanel1.visible = true;\r\n    }\r\n    CaidanJiemianHide1() {\r\n        this.CaidanRewardPanel1.visible = false;\r\n        ADManager.TAPoint(TaT.PageLeave, 'SYskinpage');\r\n    }\r\n    ADGetRewardClick1() {\r\n        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_SYskin');\r\n        console.log('看广告');\r\n        ADManager.ShowReward(() => {\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 4);\r\n            let strs = skin.split(\"_\");\r\n            Laya.LocalStorage.setItem(\"Caidanskin\" + 4, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            this.CaidanJiemianHide1();\r\n            this.Skinitems.forEach((v, i) => {\r\n                v.Fell(this.CaiDanDatas2[i], this.Caidanqiang);\r\n            });\r\n            lwg.Global._createHint_01(lwg.Enum.HintType.saiyaren);\r\n        });\r\n    }\r\n    CaiDanInit() {\r\n        this.Caidan1 = this.Caidanqiang.getChildByName(\"Caidan1\");\r\n        this.Caidan2 = this.Caidanqiang.getChildByName(\"Caidan2\");\r\n        this.Caidan1Init();\r\n        this.Caidan2Init();\r\n    }\r\n    Caidan1Init() {\r\n        this.Caidan1.on(Laya.Event.CLICK, this, this.CaidanJiemianShow2);\r\n        this.CaidanRewardPanelinit2();\r\n    }\r\n    CaidanRewardPanelinit2() {\r\n        this.CaidanRewardPanel2 = this.Caidanqiang.getChildByName(\"CaidanRewardPanel2\");\r\n        this.RewardBg2 = this.CaidanRewardPanel2.getChildByName(\"RewardBG\");\r\n        this.ADGetReward2 = this.RewardBg2.getChildByName(\"ADGetReward\");\r\n        this.CloseRewardBtn2 = this.RewardBg2.getChildByName(\"CloseRewardBtn\");\r\n        this.CaidanJiemianHide2();\r\n        this.ADGetReward2.on(Laya.Event.CLICK, this, this.ADGetRewardClick2);\r\n        this.CloseRewardBtn2.on(Laya.Event.CLICK, this, this.CaidanJiemianHide2);\r\n    }\r\n    CaidanJiemianShow2() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_CSskin');\r\n        lwg.Animation.leftRight_Shake(this.Caidan1, 20, 100, 0, f => {\r\n            lwg.Animation.leftRight_Shake(this.Caidan1, 20, 100, 0, f => {\r\n                let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 2);\r\n                let strs = skin.split(\"_\");\r\n                if (strs[0] == \"1\") {\r\n                }\r\n                else {\r\n                    this.CaidanRewardPanel2.visible = true;\r\n                    ADManager.TAPoint(TaT.PageEnter, 'CSskinpage');\r\n                }\r\n            });\r\n        });\r\n    }\r\n    CaidanJiemianHide2() {\r\n        this.CaidanRewardPanel2.visible = false;\r\n    }\r\n    ADGetRewardClick2() {\r\n        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_CSskin');\r\n        console.log('看广告!');\r\n        ADManager.ShowReward(() => {\r\n            ADManager.TAPoint(TaT.PageLeave, 'CSskinpage');\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 2);\r\n            let strs = skin.split(\"_\");\r\n            Laya.LocalStorage.setItem(\"Caidanskin\" + 2, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            this.CaidanJiemianHide2();\r\n            this.Skinitems.forEach((v, i) => {\r\n                v.Fell(this.CaiDanDatas2[i], this.Caidanqiang);\r\n            });\r\n            lwg.Global._createHint_01(lwg.Enum.HintType.cangshugongzhu);\r\n        });\r\n    }\r\n    Caidan2Init() {\r\n        this.xmax = this.Caidan1.x + 100;\r\n        this.xmin = this.Caidan1.x - 100;\r\n        this.ymax = this.Caidan1.y + 100;\r\n        this.ymin = this.Caidan1.y - 100;\r\n        this.caidanDan = this.Caidan2.getChildAt(0);\r\n        console.log(this.caidanDan);\r\n        this.caidanDan.on(Laya.Event.MOUSE_DOWN, this, this.CaiDanDown);\r\n        this.caidanDan.on(Laya.Event.MOUSE_UP, this, this.CaiDanUp);\r\n        this.caidanDan.on(Laya.Event.MOUSE_OUT, this, this.CaidanMoveOut);\r\n        this.ImageX = this.caidanDan.x;\r\n        this.ImageY = this.caidanDan.y;\r\n        this.CaidanRewardPanelinit3();\r\n    }\r\n    CaiDanDown() {\r\n        console.log(\"彩蛋点击事件\");\r\n        this.Caidanqiang.addChild(this.caidanDan);\r\n        this.caidanDan.x = this.Caidanqiang.mouseX;\r\n        this.caidanDan.y = this.Caidanqiang.mouseY;\r\n        this.caidanDan.on(Laya.Event.MOUSE_MOVE, this, this.CaiDanMove);\r\n    }\r\n    CaiDanMove() {\r\n        this.caidanDan.x = this.Caidanqiang.mouseX;\r\n        this.caidanDan.y = this.Caidanqiang.mouseY;\r\n        console.log(this.caidanDan.x, this.caidanDan.y);\r\n        console.log(this.Caidanqiang.mouseX, this.Caidanqiang.mouseY);\r\n    }\r\n    CaidanMoveOut() {\r\n        this.CaiDanUp();\r\n    }\r\n    CaiDanUp() {\r\n        this.Caidan2.addChild(this.caidanDan);\r\n        this.caidanDan.off(Laya.Event.MOUSE_MOVE, this, this.CaiDanMove);\r\n        let x = this.caidanDan.x;\r\n        let y = this.caidanDan.y;\r\n        console.log(x, y);\r\n        if (x > this.xmin && x < this.xmax && y > this.ymin && y < this.ymax) {\r\n            console.log(\"展示神龙\");\r\n            this.CaidanRewardPanelShow();\r\n        }\r\n        else {\r\n            console.log(\"位置恢复,不触发\");\r\n        }\r\n        this.caidanDan.x = this.ImageX;\r\n        this.caidanDan.y = this.ImageY;\r\n    }\r\n    CaidanRewardPanelinit3() {\r\n        this.CaidanRewardPanel3 = this.Caidanqiang.getChildByName(\"CaidanRewardPanel3\");\r\n        this.Bg = this.CaidanRewardPanel3.getChildByName(\"Bg\");\r\n        this.Props = this.Bg.getChildByName(\"Props\");\r\n        this.ShenLongWenzi = this.Bg.getChildByName(\"ShenLongWenzi\");\r\n        for (let index = 0; index < this.Props.numChildren; index++) {\r\n            this.props.push(this.Props.getChildAt(index));\r\n        }\r\n        this.ADGetReward = this.Bg.getChildByName(\"ADGetReward\");\r\n        this.GetReward = this.Bg.getChildByName(\"GetReward\");\r\n        this.ADGetReward.on(Laya.Event.CLICK, this, this.ADGetRewardClick);\r\n        this.GetReward.on(Laya.Event.CLICK, this, this.GetRewardClick);\r\n        console.log(\"this.props\", this.props);\r\n        this.CaidanRewardPanelHide();\r\n    }\r\n    CaidanRewardPanelShow() {\r\n        ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_dragongift');\r\n        ADManager.TAPoint(TaT.PageEnter, 'dragonpage');\r\n        this.ShenLongWenzi.visible = this.Rewardindex == 5;\r\n        ;\r\n        this.Props.visible = !this.ShenLongWenzi.visible;\r\n        this.ADGetReward.getChildAt(1).visible = !this.ShenLongWenzi.visible;\r\n        this.CaidanRewardPanel3.visible = true;\r\n    }\r\n    CaidanRewardPanelHide() {\r\n        this.CaidanRewardPanel3.visible = false;\r\n    }\r\n    ShowReward() {\r\n        let ran = this.randomInRange_i(0, 100);\r\n        if (ran >= 0 && ran < 1) {\r\n            this.Rewardindex = 0;\r\n        }\r\n        else if (ran >= 1 && ran < 36) {\r\n            this.Rewardindex = 1;\r\n        }\r\n        else if (ran >= 36 && ran < 66) {\r\n            this.Rewardindex = 2;\r\n        }\r\n        else if (ran >= 66 && ran < 68) {\r\n            this.Rewardindex = 3;\r\n        }\r\n        else if (ran >= 68 && ran < 100) {\r\n            if (lwg.Global._kejigongzhu) {\r\n                this.Rewardindex = 3;\r\n            }\r\n            else {\r\n                this.Rewardindex = 4;\r\n            }\r\n        }\r\n        if (this.Rewardindex == 5) {\r\n        }\r\n        else {\r\n            this.props.forEach((v, i) => {\r\n                if (this.Rewardindex == i) {\r\n                    v.visible = true;\r\n                }\r\n                else {\r\n                    v.visible = false;\r\n                }\r\n            });\r\n        }\r\n        this.ShenLongWenzi.visible = this.Rewardindex == 5;\r\n        this.Props.visible = !this.ShenLongWenzi.visible;\r\n        ;\r\n        this.ADGetReward.getChildAt(1).visible = !this.ShenLongWenzi.visible;\r\n        ADManager.TAPoint(TaT.PageEnter, 'dragongiftpage');\r\n    }\r\n    ADGetRewardClick() {\r\n        ADManager.TAPoint(TaT.PageLeave, 'dragongiftpage');\r\n        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_dragongift');\r\n        console.log(\"看广告\");\r\n        ADManager.ShowReward(() => {\r\n            this.ShowReward();\r\n            this.RewardGet();\r\n        });\r\n    }\r\n    ClosePanel() {\r\n        ADManager.TAPoint(TaT.PageLeave, 'dragonpage');\r\n        this.RewardGet();\r\n        this.ClosePanel();\r\n    }\r\n    GetRewardClick() {\r\n        this.RewardGet();\r\n        this.Rewardindex = 5;\r\n        this.CaidanRewardPanelHide();\r\n    }\r\n    RewardGet() {\r\n        if (this.Rewardindex == 0) {\r\n            lwg.Global._addExecution(2);\r\n            console.log(\"礼物\", this.Rewardindex);\r\n        }\r\n        else if (this.Rewardindex == 1) {\r\n            lwg.Global._addExecution(3);\r\n            console.log(\"礼物\", this.Rewardindex);\r\n        }\r\n        else if (this.Rewardindex == 2) {\r\n            lwg.Global._addGold(20);\r\n            console.log(\"礼物\", this.Rewardindex);\r\n        }\r\n        else if (this.Rewardindex == 3) {\r\n            lwg.Global._addGold(30);\r\n            console.log(\"礼物\", this.Rewardindex);\r\n        }\r\n        else if (this.Rewardindex == 4) {\r\n            lwg.Global._kejigongzhu = true;\r\n            lwg.LocalStorage.addData();\r\n            let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + 3);\r\n            let strs = skin.split(\"_\");\r\n            Laya.LocalStorage.setItem(\"Caidanskin\" + 3, \"1\" + \"_\" + strs[1] + \"_\" + strs[2]);\r\n            console.log(\"礼物\", this.Rewardindex);\r\n            lwg.Global._createHint_01(lwg.Enum.HintType.kejigongzhu);\r\n        }\r\n        else if (this.Rewardindex == 5) {\r\n            console.log(\"无礼物\");\r\n        }\r\n        this.Skinitems.forEach((v, i) => {\r\n            v.Fell(this.CaiDanDatas2[i], this.Caidanqiang);\r\n        });\r\n    }\r\n    randomInRange_i(x, y, s = null) {\r\n        let rs;\r\n        if (x == y) {\r\n            rs = x;\r\n        }\r\n        else if (y > x) {\r\n            let v = (y - x) * (s == null ? Math.random() : s) + x;\r\n            rs = v.toFixed();\r\n        }\r\n        else {\r\n            throw `x > y`;\r\n        }\r\n        return Number(rs);\r\n    }\r\n    onDisable() {\r\n        let skin = Laya.LocalStorage.getItem(\"Caidanskin\" + this.NowCaidanDataq.ID);\r\n        let strs = skin.split(\"_\");\r\n        if (strs[0] === '1') {\r\n            lwg.Global._currentPifu = this.NowCaidanDataq.Tip;\r\n            lwg.LocalStorage.addData();\r\n        }\r\n        console.log(lwg.Global._currentPifu);\r\n        ADManager.ShowBanner();\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/ZhuanPan/CaidanData.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/ZhuanPan/SkinItem.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/TJ/Admanager.ts"
  ]
}
