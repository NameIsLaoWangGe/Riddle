{
  "code": "import { lwg, Animation, EventAdmin } from \"../Lwg_Template/lwg\";\r\nimport RecordManager from \"../../TJ/RecordManager\";\r\nimport ADManager, { TaT } from \"../../TJ/Admanager\";\r\nexport default class UIMain extends lwg.Admin.Scene {\r\n    constructor() {\r\n        super();\r\n        this.victory = false;\r\n        this.timer = 0;\r\n    }\r\n    selfVars() {\r\n        this.BtnAgain = this.self['BtnAgain'];\r\n        this.Wangzi = this.self['Wangzi'];\r\n        this.KeyNum = this.self['KeyNum'];\r\n        this.Gongzhu = this.self['Gongzhu'];\r\n    }\r\n    lwgInit() {\r\n        ADManager.TAPoint(TaT.LevelStart, 'level' + lwg.Admin.openLevelNum);\r\n        RecordManager.startAutoRecord();\r\n        Laya.MouseManager.multiTouchEnabled = false;\r\n        lwg.Global._gameStart = true;\r\n        lwg.Global._createBtnAgain(this.self);\r\n        lwg.Global._createBtnPause(this.self);\r\n        lwg.Global._createBtnHint(this.self);\r\n        lwg.Global._createStimulateDec(this.self);\r\n        if (this.self.name === 'UIMain_001' && lwg.Global._gameLevel !== 1) {\r\n            this.self['Finger'].visible = false;\r\n            this.self['guideRoom'].visible = false;\r\n        }\r\n        EventAdmin.register(EventAdmin.EventType.victory, this, f => {\r\n            this.victoryAni();\r\n        });\r\n    }\r\n    openAni() {\r\n        return 0;\r\n    }\r\n    btnOnClick() {\r\n        this.self.on(Laya.Event.DOUBLE_CLICK, this, this.stageDB);\r\n    }\r\n    stageDB() {\r\n        if (lwg.Global._freetHint && lwg.Global._gameLevel !== 1 && lwg.Global._gameLevel !== 29 && lwg.Admin.openLevelNum !== 1 && lwg.Admin.openLevelNum !== 29) {\r\n            console.log('免费提示出现！');\r\n            lwg.Global._freeHintTime = (new Date).getDate();\r\n            lwg.Global._freetHint = false;\r\n            lwg.LocalStorage.addData();\r\n            lwg.Admin._openScene('UIPassHint', null, null, f => {\r\n                lwg.Admin._sceneControl['UIPassHint']['UIPassHint'].setStyle();\r\n            });\r\n        }\r\n        else if (!lwg.Global._freetHint) {\r\n            console.log('今日免费提示机会用完了！');\r\n        }\r\n        else {\r\n            console.log('第1关和第29关不会出现免费提示！');\r\n        }\r\n    }\r\n    victoryAni() {\r\n        lwg.Global._gameStart = false;\r\n        let self = this.self;\r\n        let i = Laya.Physics.I;\r\n        i.worldRoot = self;\r\n        let targetX = (this.Wangzi.x + this.Gongzhu.x) / 2;\r\n        let targetY = (this.Wangzi.y + this.Gongzhu.y) / 2;\r\n        self.x += targetX;\r\n        self.y += targetY;\r\n        self.anchorX = targetX / self.width;\r\n        self.anchorY = targetY / self.height;\r\n        lwg.Animation.move_Scale(self, 1, self.x, self.y, Laya.stage.width / 2, Laya.stage.height / 2, 2, 500, 100, f => {\r\n            Laya.timer.frameOnce(1000, this, f => {\r\n                Animation.drop_Excursion(this.Gongzhu, this.Gongzhu.y + 1600, 20, 0, 3000, 0, f => { });\r\n                lwg.Admin._openScene(lwg.Admin.SceneName.UIVictoryBox, null, null, null);\r\n            });\r\n        });\r\n    }\r\n    onUpdate() {\r\n        if (!lwg.Global._gameStart) {\r\n            return;\r\n        }\r\n        this.timer++;\r\n        if (this.self.name === 'UIMain_001') {\r\n            if (lwg.Global._gameLevel === 1) {\r\n                if (this.timer % 85 === 0 || this.timer === 1) {\r\n                    lwg.Animation.move_Simple(this.self['Finger'], this.self['Room1'].x, this.self['Room1'].y, this.self['guideRoom'].x, this.self['guideRoom'].y, 800, 0, f => {\r\n                    });\r\n                    if (this.self['Wangzi']['UIMain_Wangzi'].belongRoom === this.self['Gongzhu']['UIMain_Gongzhu'].belongRoom) {\r\n                        this.self['Finger'].alpha = 0;\r\n                        this.self['Finger'].alpha = 0;\r\n                    }\r\n                    else {\r\n                        this.self['Finger'].alpha = 1;\r\n                        this.self['Finger'].alpha = 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    lwgDisable() {\r\n        if (this.victory) {\r\n            ADManager.TAPoint(TaT.LevelFinish, 'level' + lwg.Admin.openLevelNum);\r\n        }\r\n        else {\r\n            ADManager.TAPoint(TaT.LevelFail, 'level' + lwg.Admin.openLevelNum);\r\n        }\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this);\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/TJ/RecordManager.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/TJ/Admanager.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Game/UIMain_Wangzi.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Game/UIMain_Gongzhu.ts"
  ]
}
