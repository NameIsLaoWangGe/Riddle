{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport PromoItem from \"./PromoItem\";\r\nimport Behaviour from \"./Behaviour\";\r\nvar P201 = (function (_super) {\r\n    tslib_1.__extends(P201, _super);\r\n    function P201() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.promoItem = null;\r\n        _this.shake = false;\r\n        _this.animTime = 0;\r\n        _this.refrTime = 0;\r\n        return _this;\r\n    }\r\n    P201.prototype.OnAwake = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var list;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.promoItem = this.owner.getComponent(PromoItem);\r\n                        TJ.Develop.Yun.Promo.Data.ReportAwake(P201.style);\r\n                        this.promoItem.style = P201.style;\r\n                        this.active = false;\r\n                        if (!(P201.promoList == null)) return [3, 2];\r\n                        return [4, TJ.Develop.Yun.Promo.List.Get(P201.style)];\r\n                    case 1:\r\n                        list = _a.sent();\r\n                        if (P201.promoList == null)\r\n                            P201.promoList = list;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (P201.promoList.count > 0) {\r\n                            TJ.Develop.Yun.Promo.Data.ReportStart(P201.style);\r\n                            this.active = true;\r\n                        }\r\n                        else {\r\n                            this.owner.destroy();\r\n                        }\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    P201.prototype.OnEnable = function () {\r\n        this.LoadAndShowIcon();\r\n    };\r\n    P201.prototype.OnDisable = function () {\r\n        if (P201.promoList != null) {\r\n            P201.promoList.Unload(this.promoItem.data);\r\n        }\r\n    };\r\n    P201.prototype.OnUpdate = function () {\r\n        var deltaTime = Laya.timer.delta / 1000;\r\n        this.refrTime += deltaTime;\r\n        if (this.refrTime > 5) {\r\n            this.refrTime -= 5;\r\n            this.LoadAndShowIcon();\r\n        }\r\n        if (!this.shake)\r\n            return;\r\n        this.animTime += deltaTime;\r\n        this.animTime %= 2.5;\r\n        if (this.animTime <= .75) {\r\n            this.promoItem.owner.rotation = Math.sin(this.animTime * 6 * Math.PI) * 25 * (1 - this.animTime / .75);\r\n        }\r\n        else {\r\n            this.promoItem.owner.rotation = 0;\r\n        }\r\n    };\r\n    P201.prototype.LoadIcon = function () {\r\n        var _this = this;\r\n        var data = P201.promoList.Load();\r\n        if (data != null) {\r\n            P201.promoList.Unload(this.promoItem.data);\r\n            this.promoItem.data = data;\r\n            this.promoItem.onClick_ = function () { _this.LoadAndShowIcon(); };\r\n            this.promoItem.DoLoad();\r\n        }\r\n        return data;\r\n    };\r\n    P201.prototype.LoadAndShowIcon = function () {\r\n        if (this.LoadIcon() != null) {\r\n            this.promoItem.OnShow();\r\n        }\r\n        else {\r\n            if (this.promoItem.data == null) {\r\n                this.owner.destroy();\r\n            }\r\n        }\r\n    };\r\n    P201.style = \"P201\";\r\n    P201.promoList = null;\r\n    return P201;\r\n}(Behaviour));\r\nexport default P201;\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/TJ/Promo/script/PromoItem.ts",
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/TJ/Promo/script/Behaviour.ts"
  ]
}
