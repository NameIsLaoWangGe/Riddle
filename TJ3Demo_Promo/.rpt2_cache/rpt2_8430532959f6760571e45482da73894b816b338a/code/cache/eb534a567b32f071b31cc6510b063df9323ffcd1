{
  "code": "import { lwg } from \"../script/Lwg_Template/lwg\";\r\nvar RecordManager = (function () {\r\n    function RecordManager() {\r\n        this.GRV = null;\r\n        this.isRecordVideoing = false;\r\n        this.isVideoRecord = false;\r\n        this.videoRecordTimer = 0;\r\n        this.isHasVideoRecord = false;\r\n    }\r\n    RecordManager.Init = function () {\r\n        RecordManager.grv = new TJ.Platform.AppRt.DevKit.TT.GameRecorderVideo();\r\n    };\r\n    RecordManager.startAutoRecord = function () {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.grv == null)\r\n            RecordManager.Init();\r\n        if (RecordManager.recording)\r\n            return;\r\n        RecordManager.autoRecording = true;\r\n        console.log(\"******************开始录屏\");\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    };\r\n    RecordManager.stopAutoRecord = function () {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (!RecordManager.autoRecording) {\r\n            console.log(\"RecordManager.autoRecording\", RecordManager.autoRecording);\r\n            return false;\r\n        }\r\n        RecordManager.autoRecording = false;\r\n        RecordManager._end(false);\r\n        if (Date.now() - RecordManager.lastRecordTime > 6000) {\r\n            return true;\r\n        }\r\n        if (Date.now() - RecordManager.lastRecordTime < 3000) {\r\n            console.log(\"小于3秒\");\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    RecordManager.startRecord = function () {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.autoRecording) {\r\n            this.stopAutoRecord();\r\n        }\r\n        RecordManager.recording = true;\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    };\r\n    RecordManager.stopRecord = function () {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"time:\" + (Date.now() - RecordManager.lastRecordTime));\r\n        if (Date.now() - RecordManager.lastRecordTime <= 3000) {\r\n            return false;\r\n        }\r\n        RecordManager.recording = false;\r\n        RecordManager._end(true);\r\n        return true;\r\n    };\r\n    RecordManager._start = function () {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180s  ？？？？？\");\r\n        RecordManager.grv.Start(180);\r\n    };\r\n    RecordManager._end = function (share) {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180结束 ？？？？？\");\r\n        RecordManager.grv.Stop(share);\r\n    };\r\n    RecordManager._share = function (successedAc, completedAc, failAc) {\r\n        if (completedAc === void 0) { completedAc = null; }\r\n        if (failAc === void 0) { failAc = null; }\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************吊起分享 ？？？？？\", RecordManager.grv, RecordManager.grv.videoPath);\r\n        if (RecordManager.grv.videoPath) {\r\n            var p = new TJ.Platform.AppRt.Extern.TT.ShareAppMessageParam();\r\n            p.extra.videoTopics = [\"甩锅给队友\", \"回来吧刺激战场\", \"番茄小游戏\", \"抖音小游戏\"];\r\n            p.channel = \"video\";\r\n            p.success = function () {\r\n                lwg.Global._createHint(lwg.Enum.HintType.sharesuccess);\r\n                successedAc();\r\n            };\r\n            p.fail = function () {\r\n                lwg.Global._createHint(lwg.Enum.HintType.sharefail);\r\n                failAc();\r\n            };\r\n            RecordManager.grv.Share(p);\r\n        }\r\n        else {\r\n            lwg.Global._createHint(lwg.Enum.HintType.novideo);\r\n        }\r\n    };\r\n    RecordManager.recording = false;\r\n    RecordManager.autoRecording = false;\r\n    return RecordManager;\r\n}());\r\nexport default RecordManager;\r\n",
  "references": [
    "D:/Game/project/Riddle/Riddle1/TJ3Demo_Promo/src/script/Lwg_Template/lwg.ts"
  ]
}
